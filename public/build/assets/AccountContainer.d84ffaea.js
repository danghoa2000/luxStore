import{a7 as Y,u as W,r as u,R as e,G as A,C as P,F as k,h as x,a8 as O,a9 as v,B as N,c as $,T as z,aa as J,ab as Q,ac as X,S as Z,az as ee,d as U,aA as j,q as C}from"./index.5ce80200.js";import{T as te,a as ae,E as re,b as ne,c as se,d as H,e as ce}from"./EnhancedTableHead.4e137c38.js";import{A as oe,R as le}from"./pathUrl.54e42181.js";import{T as D}from"./TextField.f7bb6de6.js";import{S as V}from"./Select.fa04d544.js";import{B as ie}from"./Breadcrumbs.f5b119d2.js";import{S as me}from"./Search.7dacac20.js";import{A as de}from"./AddCircleSharp.04bafc2d.js";import{C as ue,R as pe}from"./ReportProblem.91ad1bc7.js";import{B as Ee}from"./BorderColor.6ee4679d.js";import{f as be}from"./index.d7c082dd.js";import{p as fe}from"./index.ac026f14.js";import"./KeyboardArrowRight.e41f0be0.js";import"./LastPage.e4998160.js";import"./OutlinedInput.63c5b1ce.js";const ge=t=>{const{headCells:a,setSearchFiled:h}=t,[o]=Y(),{handleSubmit:m,control:E,reset:d,setValue:S,getValues:b}=W({defaultValues:{user_code:"",full_name:"",email:"",telephone:"",birthday:"",address:"",direction:"",role:-1,status:-1,province_id:"",district_id:"",commune_id:""}}),T=u.exports.useMemo(()=>{const s=[];return Object.keys(a).forEach((r,i)=>{a[r].id!=="province_id"&&a[r].id!=="district_id"&&a[r].id!=="commune_id"&&(a[r].type==="date"?s.push(e.createElement(A,{item:!0,xs:4,key:i},e.createElement(P,{name:a[r].id,control:E,render:({field:l})=>e.createElement(k,{variant:"standard"},e.createElement(D,{...l,label:o(a[r].label),type:"date",size:"small",InputLabelProps:{shrink:!0},onBlur:c=>{S(a[r].id,c.target.value?c.target.value.trim():"")}}))}))):a[r].id==="role"?s.push(e.createElement(A,{item:!0,xs:4,key:i},e.createElement(P,{name:a[r].id,control:E,render:({field:l})=>e.createElement(k,{variant:"standard"},e.createElement(V,{...l,label:o(a[r].label),size:"small"},e.createElement(x,{value:-1},"select option"),e.createElement(x,{value:O.EMPLOYEE},o(`role.${O.EMPLOYEE}`)),e.createElement(x,{value:O.MANAGER},o(`role.${O.MANAGER}`))))}))):a[r].id==="status"?s.push(e.createElement(A,{item:!0,xs:4,key:i},e.createElement(P,{name:a[r].id,control:E,render:({field:l})=>e.createElement(k,{variant:"standard"},e.createElement(V,{...l,label:o(a[r].label),size:"small"},e.createElement(x,{key:"",value:-1},"select option"),e.createElement(x,{key:v.ACTIVE,value:v.ACTIVE},o(`status.${v.ACTIVE}`)),e.createElement(x,{key:v.BLOCK,value:v.BLOCK},o(`status.${v.BLOCK}`))))}))):s.push(e.createElement(A,{item:!0,xs:4,key:i},e.createElement(P,{name:a[r].id,control:E,render:({field:l})=>e.createElement(k,{variant:"standard"},e.createElement(D,{...l,label:o(a[r].label),size:"small",onBlur:c=>{S(a[r].id,c.target.value?c.target.value.trim():"")}}))}))))}),s},[]),p=s=>{h(s)};return e.createElement("div",null,e.createElement("form",{onSubmit:m(p)},e.createElement(A,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},T,e.createElement("div",{className:"d-flex w-100"},e.createElement(N,{variant:"contained",type:"submit",className:"m-1",style:{background:"#28a745"}},"Search"),e.createElement(N,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>{d(),h({})}},"Clear")))))},ye=t=>{const{open:a,setOpen:h,order:o,orderBy:m,page:E,rowsPerPage:d,handleRequestSort:S,handleChangePage:b,handleChangeRowsPerPage:T,redirectAccountCreate:p,headCells:s,accountList:r,showNoti:i,status:l,setShowNoti:c,setSearchFiled:_,totalRecord:R,deleteAccount:L}=t,B=$();return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(z,{variant:"h4",gutterBottom:!0},"Account"),e.createElement(ie,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(J,{to:"/admin"},"Home"),e.createElement(z,null,"Account"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(N,{variant:"contained",onClick:()=>h(!a)},"Filter ",e.createElement(me,{sx:{marginLeft:1}})),e.createElement(N,{variant:"contained",onClick:()=>p(),sx:{marginLeft:2}},"Create ",e.createElement(de,{sx:{marginLeft:1}}))),e.createElement(ue,{in:a,timeout:"auto",unmountOnExit:!0},e.createElement("div",{className:"card__admin"},e.createElement(ge,{headCells:s,setSearchFiled:_}))),e.createElement("div",{className:"card__admin"},e.createElement(Q,{style:{margin:"-25px"}},e.createElement(te,{sx:{maxHeight:600},className:"table__dark"},e.createElement(ae,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,"aria-label":"sticky table"},e.createElement(re,{order:o,orderBy:m,onRequestSort:S,rowCount:r.length||0,headCells:s}),e.createElement(ne,null,r.length>0?r.map((f,F)=>e.createElement(se,{hover:!0,key:F},e.createElement(H,{component:"td",scope:"row",padding:"normal"},e.createElement(Ee,{color:"primary",className:"action",onClick:()=>{B(oe.UPDATE,{state:{id:f.id}})}}),e.createElement("span",{className:"tool"}),e.createElement(le,{color:"error",className:"action",onClick:()=>L(f.id)})),Object.keys(s).map((g,w)=>e.createElement(H,{component:"td",key:w,scope:"row",padding:"normal"},s[g].render?s[g].convert?X(s[g].render(f)):s[g].render(f):f[g])))):e.createElement(H,{align:"center",colSpan:Object.keys(s).length,style:{opacity:.5,height:"100px"}},e.createElement(pe,null)," No data")))),e.createElement(ce,{rowsPerPageOptions:[5,10,25],component:"div",className:"paginate__admin",count:R,rowsPerPage:d,page:E,onPageChange:b,onRowsPerPageChange:T}))),i&&e.createElement(Z,{type:l.type,message:l.message,setShowNoti:c}))},he={user_code:{id:"user_code",numeric:!1,label:"account.list.table.user_code",type:"text"},role:{id:"role",numeric:!0,label:"account.list.table.role",convert:!0,render:t=>`role.${t.role}`,type:"role"},status:{id:"status",numeric:!0,label:"account.list.table.status",convert:!0,render:t=>`status.${t.status}`,type:"status"},full_name:{id:"full_name",numeric:!1,label:"account.list.table.full_name",render:t=>t.info?t.info.full_name:"",type:"text"},email:{id:"email",numeric:!1,label:"account.list.table.email",render:t=>t.info?t.info.email:"",type:"text"},telephone:{id:"telephone",numeric:!1,label:"account.list.table.telephone",render:t=>t.info?t.info.telephone:"",type:"text"},birthday:{id:"birthday",numeric:!1,label:"account.list.table.birthday",render:t=>t.info&&t.info.birthday?be(fe(t.info.birthday),ee):"",type:"date"},province:{id:"province_id",numeric:!1,label:"account.list.table.province",render:t=>t.info&&t.info.province?t.info.province.name:"",type:"text"},district:{id:"district_id",numeric:!1,label:"account.list.table.district",render:t=>t.info&&t.info.district?t.info.district.name:"",type:"text"},commune:{id:"commune_id",numeric:!1,label:"account.list.table.commune",render:t=>t.info&&t.info.commune?t.info.commune.name:"",type:"text"},address:{id:"address",numeric:!1,label:"account.list.table.address",render:t=>t.info?t.info.address:"",type:"text"}},we=()=>{const[t,a]=u.exports.useState([]),[h,o]=e.useState(!0),[m,E]=e.useState("asc"),[d,S]=e.useState("user_code"),[b,T]=e.useState(0),[p,s]=e.useState(5),[r,i]=u.exports.useState({}),[l,c]=u.exports.useState(!1),[_,R]=u.exports.useState({}),[L,B]=u.exports.useState(0),f=$(),F={...he},g=(y,n)=>{E(d===n&&m==="asc"?"desc":"asc"),S(n)},w=(y,n)=>{T(n)},K=y=>{s(parseInt(y.target.value,10)),T(0)},q=u.exports.useCallback(()=>{f("/admin/account/create")},[]),M=u.exports.useCallback(()=>{const y={searchField:_,pageSize:p,currentPage:b,currentSort:d,currentDirection:m};U.get(j.LIST,{params:{...y}}).then(n=>{n.data.code===C.HTTP_OK&&(a(n.data.accounts),B(n.data.total))}).catch(n=>{i({type:"error",message:n.data?n.data.message:"Server error"}),c(!0)})},[m,d,b,p,_]);u.exports.useEffect(()=>{M()},[m,d,b,p,_]);const G=u.exports.useCallback(y=>{U.delete(j.DELETE+"/"+y).then(n=>{n.data.code===C.HTTP_OK&&(i({type:"success",message:n.data.message}),c(!0),M()),n.data.code===C.HTTP_NOT_FOUND&&(c(!0),i({type:"error",message:n.data.message}))}).catch(({response:n})=>{n.data.code===C.UNPROCESSABLE_ENTITY&&Object.keys(n.data.errors).forEach(I=>{setError(I,{type:"custom",message:Object.values(n.data.errors[I])})}),i({type:"error",message:n.data?n.data.message:"Server error"}),c(!0)})},[m,d,b,p,_]);return e.createElement(ye,{open:h,setOpen:o,order:m,orderBy:d,page:b,rowsPerPage:p,handleRequestSort:g,handleChangePage:w,handleChangeRowsPerPage:K,redirectAccountCreate:q,headCells:F,accountList:t,showNoti:l,status:r,setShowNoti:c,setSearchFiled:R,totalRecord:L,deleteAccount:G})};export{we as default};
