import{R as e,T as f,aa as z,B as I,G as l,C as c,F as m,N as C,O as S,ar as _,as as le,h,at as G,i as se,S as ce,c as me,r,a7 as ie,au as oe,av as U,u as de,d as A,aA as ue,q as H,aB as V,a8 as Ee,a9 as pe,aw as ge}from"./index.5ce80200.js";import{B as he}from"./Breadcrumbs.f5b119d2.js";import{B as ve}from"./BorderColor.6ee4679d.js";import{E as xe}from"./Email.6376d782.js";import{C as fe}from"./Call.484a3e82.js";import{C as Ce}from"./CalendarMonth.a98bc8b4.js";import{S as D}from"./Select.fa04d544.js";import{T as Se}from"./TextField.f7bb6de6.js";import{R as Y,F as k,a as F}from"./RadioGroup.7a04bd2c.js";import"./OutlinedInput.63c5b1ce.js";const _e=T=>{const{redirectBack:w,handleCreate:q,handleSubmit:P,control:n,reset:p,setValue:s,getValues:R,errors:u,loading:g,showNoti:L,status:N,setShowNoti:O,province:v,district:b,commune:x,setProvinceSelected:d,setDistrictSelected:y,setCommuneSelected:i}=T;return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(f,{variant:"h4",gutterBottom:!0},"Account"),e.createElement(he,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(z,{to:"/admin"},"Home"),e.createElement(z,{to:"/admin/account"},"Account"),e.createElement(f,null,"Create"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(I,{variant:"contained",onClick:()=>w()},"Back")),e.createElement("form",{onSubmit:P(q)},e.createElement("div",{className:"card__admin"},e.createElement(f,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Basic information"),e.createElement(l,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(l,{item:!0,xs:6},e.createElement(c,{name:"user_code",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(C,{htmlFor:"userCode"},"User code"," ",e.createElement("span",{className:"required"})),e.createElement(S,{...a,startAdornment:e.createElement(_,{position:"start"},e.createElement(le,null)),placeholder:"Enter your User Code",onBlur:t=>{s(t.target.name,t.target.value?t.target.value.trim():"")}}))}),u.user_code&&e.createElement("p",{className:"text-danger"},u.user_code.message)),e.createElement(l,{item:!0,xs:6},e.createElement(c,{name:"full_name",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(C,{htmlFor:"fullName"},"Full name"," ",e.createElement("span",{className:"required"})),e.createElement(S,{id:"fullName",...a,startAdornment:e.createElement(_,{position:"start"},e.createElement(ve,null)),placeholder:"Enter your Full Name",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")}}))}),u.full_name&&e.createElement("p",{className:"text-danger"},u.full_name.message)),e.createElement(l,{item:!0,xs:6},e.createElement(c,{name:"email",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(C,{htmlFor:"email"},"Email"," ",e.createElement("span",{className:"required"})),e.createElement(S,{id:"email",...a,startAdornment:e.createElement(_,{position:"start"},e.createElement(xe,null)),placeholder:"Enter your Email address",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")}}))}),u.email&&e.createElement("p",{className:"text-danger"},u.email.message)))),e.createElement("div",{className:"card__admin"},e.createElement(f,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Contact infomation"),e.createElement(l,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(l,{item:!0,xs:6},e.createElement(c,{name:"telephone",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(C,{htmlFor:"telephone"},"Telephone"),e.createElement(S,{id:"telephone",...a,startAdornment:e.createElement(_,{position:"start"},e.createElement(fe,null)),placeholder:"xxx-xxx-xxxx",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")}}))})),e.createElement(l,{item:!0,xs:6},e.createElement(c,{name:"birthday",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(C,{htmlFor:"birthday"},"Birthday"),e.createElement(S,{id:"birthday",...a,startAdornment:e.createElement(_,{position:"start"},e.createElement(Ce,null)),placeholder:"Enter your Birthday",type:"date"}))})),e.createElement(l,{item:!0,xs:4},e.createElement(c,{name:"province_id",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(D,{...a,onChange:t=>{s(t.target.name,t.target.value),d(t.target.value),y(-1),s("district_id",-1),i(-1),s("commune_id",-1)},label:"province",size:"small"},e.createElement(h,{value:-1},"select province"),v.length>0&&v.map(t=>e.createElement(h,{key:t.id,value:t.id},t.name))))})),e.createElement(l,{item:!0,xs:4},e.createElement(c,{name:"district_id",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(D,{...a,onChange:t=>{s(t.target.name,t.target.value),y(t.target.value),i(-1),s("commune_id",-1)},label:"district_id",size:"small"},e.createElement(h,{value:-1},"select district"),b.length>0&&b.map(t=>e.createElement(h,{key:t.id,value:t.id},t.name))))})),e.createElement(l,{item:!0,xs:4},e.createElement(c,{name:"commune_id",control:n,className:"ligth__mode",render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(D,{onChange:t=>{s(t.target.name,t.target.value),i(t.target.value)},...a,label:"commune_id",size:"small"},e.createElement(h,{value:-1},"select commune"),x.length>0&&x.map(t=>e.createElement(h,{key:t.id,value:t.id},t.name))))})),e.createElement(l,{item:!0,xs:12},e.createElement(c,{name:"address",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(Se,{className:"text-white",id:"address",...a,placeholder:"Enter your address",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")},multiline:!0,rows:4}))})))),e.createElement("div",{className:"card__admin"},e.createElement(f,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Setting"),e.createElement(l,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(l,{item:!0,xs:6},e.createElement("div",{className:"d-inline"},e.createElement(c,{name:"role",control:n,render:({field:a})=>e.createElement(m,{variant:"standard"},e.createElement(G,{id:"role"},"Role",e.createElement("span",{className:"required"})),e.createElement(Y,{defaultValue:"1",...a,checked:"1"},e.createElement(k,{value:"1",control:e.createElement(F,null),label:"Manage"}),e.createElement(k,{value:"0",control:e.createElement(F,null),label:"Employee"})))}))),e.createElement(l,{item:!0,xs:6},e.createElement("div",{className:"d-inline"},e.createElement(c,{name:"status",control:n,render:({field:a})=>e.createElement(m,null,e.createElement(G,{id:"status"},"Status",e.createElement("span",{className:"required"})),e.createElement(Y,{defaultValue:"1",...a,checked:"1"},e.createElement(k,{value:"1",control:e.createElement(F,null),label:"Active"}),e.createElement(k,{value:"0",control:e.createElement(F,null),label:"Block"})))}))))),e.createElement("div",{className:"d-flex justify-content-center w-100"},e.createElement(I,{variant:"contained",type:"submit",className:"m-1",disabled:g},g&&e.createElement(se,{disableShrink:!0,style:{color:"white",width:"14px",height:"14px",margin:"0 5px 0 0"}}),"Create"),e.createElement(I,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>p()},"Clear"))),L&&e.createElement(ce,{type:N.type,message:N.message,setShowNoti:O}))},Pe=()=>{const T=me(),[w,q]=r.exports.useState(!1),[P,n]=r.exports.useState(!1),[p]=ie(),[s,R]=r.exports.useState({}),[u,g]=r.exports.useState(!1),[L,N]=r.exports.useState([]),[O,v]=r.exports.useState([]),[b,x]=r.exports.useState([]),[d,y]=r.exports.useState(-1),[i,a]=r.exports.useState(-1),[t,K]=r.exports.useState(-1),$=()=>T(-1),J=oe().shape({user_code:U().required(p("validate.required",{name:"User code"})),full_name:U().required(p("validate.required",{name:"Full name"})),email:U().required(p("validate.required",{name:"Email"})).email(p("validate.email",{name:"Email"}))}),{handleSubmit:Q,control:W,reset:j,setValue:X,getValues:Z,setError:B,formState:{errors:ee}}=de({shouldUnregister:!1,defaultValues:{user_code:"",full_name:"",email:"",telephone:"",birthday:"",address:"",direction:"",role:Ee.EMPLOYEE,status:pe.ACTIVE,province_id:d,district_id:i,commune_id:t},resolver:ge(J)}),te=r.exports.useCallback(o=>{n(!0),A.post(ue.CREATE,{...o}).then(E=>{E.data.code===H.HTTP_OK&&(R({type:"success",message:E.data.message}),j()),g(!0),n(!1)}).catch(({response:E})=>{E.data.code===H.UNPROCESSABLE_ENTITY&&Object.keys(E.data.errors).forEach(M=>{B(M,{type:"custom",message:Object.values(E.data.errors[M])})}),R({type:"error",message:E.data?E.data.message:"Server error"}),g(!0),n(!1)})},[]),ae=r.exports.useCallback(()=>{A.get(V+"api/get-province").then(o=>N(o.data.provinces)).catch(o=>{B(!0)})},[]),re=r.exports.useCallback(()=>{A.get(V+"api/get-district/"+d).then(o=>v(o.data.districts)).catch(o=>{B(!0)})},[d]),ne=r.exports.useCallback(()=>{A.get(V+"api/get-commune/"+i).then(o=>x(o.data.communes)).catch(o=>{B(!0)})},[i]);return r.exports.useEffect(()=>{ae()},[]),r.exports.useEffect(()=>{d&&d!=-1?re():v([])},[d]),r.exports.useEffect(()=>{i&&i!=-1?ne():x([])},[d,i]),e.createElement(_e,{redirectBack:$,handleCreate:te,toggleDirection:w,setToggleDirection:q,handleSubmit:Q,control:W,reset:j,setValue:X,getValues:Z,errors:ee,loading:P,showNoti:u,status:s,setShowNoti:g,setProvinceSelected:y,setDistrictSelected:a,setCommuneSelected:K,province:L,district:O,commune:b})};export{Pe as default};
