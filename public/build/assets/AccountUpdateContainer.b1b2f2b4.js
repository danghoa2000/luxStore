import{R as e,T as C,aa as ee,B as M,G as i,C as o,F as d,N as y,O as b,ar as N,as as fe,h as v,at as te,i as he,S as ve,c as xe,r,ay as _e,a7 as Se,au as Ce,av as z,d as B,aA as ae,q as P,aB as Y,u as ye,a8 as be,a9 as Ne,aw as Be}from"./index.5ce80200.js";import{B as Ae}from"./Breadcrumbs.f5b119d2.js";import{B as Te}from"./BorderColor.6ee4679d.js";import{E as ke}from"./Email.6376d782.js";import{C as Fe}from"./Call.484a3e82.js";import{C as we}from"./CalendarMonth.a98bc8b4.js";import{S as K}from"./Select.fa04d544.js";import{T as Ue}from"./TextField.f7bb6de6.js";import{R as re,F as D,a as O}from"./RadioGroup.7a04bd2c.js";import"./OutlinedInput.63c5b1ce.js";const Pe=q=>{const{redirectBack:L,handleUpdate:G,toggleDirection:W,setToggleDirection:A,handleSubmit:R,control:l,reset:I,setValue:s,getValues:a,errors:E,loading:g,showNoti:V,status:T,setShowNoti:H,province:x,district:k,commune:_,setProvinceSelected:f,setDistrictSelected:F,setCommuneSelected:S}=q;return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(C,{variant:"h4",gutterBottom:!0},"Account"),e.createElement(Ae,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(ee,{to:"/admin"},"Home"),e.createElement(ee,{to:"/admin/account"},"Account"),e.createElement(C,null,"Update"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(M,{variant:"contained",onClick:()=>L()},"Back")),e.createElement("form",{onSubmit:R(G)},e.createElement("div",{className:"card__admin"},e.createElement(C,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Basic information"),e.createElement(i,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(i,{item:!0,xs:6},e.createElement(o,{name:"user_code",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(y,{htmlFor:"userCode"},"User code"," ",e.createElement("span",{className:"required"})),e.createElement(b,{...n,disabled:!0,startAdornment:e.createElement(N,{position:"start"},e.createElement(fe,null)),placeholder:"Enter your User Code",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")}}))}),E.user_code&&e.createElement("p",{className:"text-danger"},E.user_code.message)),e.createElement(i,{item:!0,xs:6},e.createElement(o,{name:"full_name",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(y,{htmlFor:"fullName"},"Full name"," ",e.createElement("span",{className:"required"})),e.createElement(b,{...n,startAdornment:e.createElement(N,{position:"start"},e.createElement(Te,null)),placeholder:"Enter your Full Name",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")}}))}),E.full_name&&e.createElement("p",{className:"text-danger"},E.full_name.message)),e.createElement(i,{item:!0,xs:6},e.createElement(o,{name:"email",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(y,{htmlFor:"email"},"Email"," ",e.createElement("span",{className:"required"})),e.createElement(b,{...n,startAdornment:e.createElement(N,{position:"start"},e.createElement(ke,null)),placeholder:"Enter your Email address",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")}}))}),E.email&&e.createElement("p",{className:"text-danger"},E.email.message)))),e.createElement("div",{className:"card__admin"},e.createElement(C,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Contact infomation"),e.createElement(i,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(i,{item:!0,xs:6},e.createElement(o,{name:"telephone",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(y,{htmlFor:"telephone"},"Telephone"),e.createElement(b,{...n,startAdornment:e.createElement(N,{position:"start"},e.createElement(Fe,null)),placeholder:"xxx-xxx-xxxx",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")}}))})),e.createElement(i,{item:!0,xs:6},e.createElement(o,{name:"birthday",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(y,{htmlFor:"birthday"},"Birthday"),e.createElement(b,{...n,startAdornment:e.createElement(N,{position:"start"},e.createElement(we,null)),placeholder:"Enter your Birthday",type:"date"}))})),e.createElement(i,{item:!0,xs:4},e.createElement(o,{name:"province_id",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(K,{...n,onChange:t=>{s(t.target.name,t.target.value),f(t.target.value),F(-1),s("district_id",-1),S(-1),s("commune_id",-1)},label:"province",size:"small"},e.createElement(v,{value:-1},"select province"),x.length>0&&x.map(t=>e.createElement(v,{key:t.id,value:t.id},t.name))))})),e.createElement(i,{item:!0,xs:4},e.createElement(o,{name:"district_id",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(K,{...n,onChange:t=>{s(t.target.name,t.target.value),F(t.target.value),S(-1),s("commune_id",-1)},label:"district_id",size:"small"},e.createElement(v,{value:-1},"select district"),k.length>0&&k.map(t=>e.createElement(v,{key:t.id,value:t.id},t.name))))})),e.createElement(i,{item:!0,xs:4},e.createElement(o,{name:"commune_id",control:l,className:"ligth__mode",render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(K,{onChange:t=>{s(t.target.name,t.target.value),S(t.target.value)},...n,label:"commune_id",size:"small"},e.createElement(v,{value:-1},"select commune"),_.length>0&&_.map(t=>e.createElement(v,{key:t.id,value:t.id},t.name))))})),e.createElement(i,{item:!0,xs:12},e.createElement(o,{name:"address",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(Ue,{className:"text-white",id:"address",...n,placeholder:"Enter your address",onBlur:t=>{s(t.target.id,t.target.value?t.target.value.trim():"")},multiline:!0,rows:4}))})))),e.createElement("div",{className:"card__admin"},e.createElement(C,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Setting"),e.createElement(i,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(i,{item:!0,xs:6},e.createElement("div",{className:"d-inline"},e.createElement(o,{name:"role",control:l,render:({field:n})=>e.createElement(d,{variant:"standard"},e.createElement(te,{id:"role"},"Role",e.createElement("span",{className:"required"})),e.createElement(re,{defaultValue:"1",...n,checked:"1"},e.createElement(D,{value:"1",control:e.createElement(O,null),label:"Manage"}),e.createElement(D,{value:"0",control:e.createElement(O,null),label:"Employee"})))}))),e.createElement(i,{item:!0,xs:6},e.createElement("div",{className:"d-inline"},e.createElement(o,{name:"status",control:l,render:({field:n})=>e.createElement(d,null,e.createElement(te,{id:"status"},"Status",e.createElement("span",{className:"required"})),e.createElement(re,{defaultValue:"1",...n,checked:"1"},e.createElement(D,{value:"1",control:e.createElement(O,null),label:"Active"}),e.createElement(D,{value:"0",control:e.createElement(O,null),label:"Block"})))}))))),e.createElement("div",{className:"d-flex justify-content-center w-100"},e.createElement(M,{variant:"contained",type:"submit",className:"m-1",disabled:g},g&&e.createElement(he,{disableShrink:!0,style:{color:"white",width:"14px",height:"14px",margin:"0 5px 0 0"}}),"Update"),e.createElement(M,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>I()},"Clear"))),V&&e.createElement(ve,{type:T.type,message:T.message,setShowNoti:H}))},Me=()=>{const q=xe(),[L,G]=r.exports.useState(!1),[W,A]=r.exports.useState(!1),[R,l]=r.exports.useState({}),[I,s]=r.exports.useState(!1),[a,E]=r.exports.useState(),{state:g}=_e(),[V,T]=r.exports.useState([]),[H,x]=r.exports.useState([]),[k,_]=r.exports.useState([]),[f]=Se(),F=()=>q(-1),S=Ce().shape({user_code:z().required(f("validate.required",{name:"User code"})),full_name:z().required(f("validate.required",{name:"Full name"})),email:z().required(f("validate.required",{name:"Email"})).email(f("validate.email",{name:"Email"}))}),n=r.exports.useCallback(()=>{B.get(ae.SHOW,{params:{id:g.id}}).then(c=>{E(c.data.account),c.data.code===P.HTTP_NOT_FOUND&&(l({type:"error",message:c.data.message}),s(!0))}).catch(({response:c})=>{l({type:"error",message:c.data?c.data.message:"Server error"}),s(!0)})},[g]);r.exports.useEffect(()=>{n()},[g]);const[t,$]=r.exports.useState(-1),[p,J]=r.exports.useState(-1),[j,Q]=r.exports.useState(-1),[h,ne]=r.exports.useState(!1),[w,le]=r.exports.useState(!1),[X,se]=r.exports.useState(!1),ce=r.exports.useCallback(()=>{B.get(Y+"api/get-province").then(c=>{T(c.data.provinces),ne(!0)}).catch(c=>{U(!0)})},[]),ie=r.exports.useCallback(async()=>{await B.get(Y+"api/get-district/"+t).then(c=>{x(c.data.districts)}).catch(c=>{U(!0)})},[t]),me=r.exports.useCallback(async()=>{await B.get(Y+"api/get-commune/"+p).then(c=>{_(c.data.communes)}).catch(c=>{U(!0)})},[p]);r.exports.useEffect(()=>{ce()},[]);const{handleSubmit:oe,control:de,reset:ue,setValue:m,getValues:Ee,setError:U,formState:{errors:pe}}=ye({shouldUnregister:!1,defaultValues:{user_code:"",full_name:"",email:"",telephone:"",birthday:"",address:"",direction:"",role:be.EMPLOYEE,status:Ne.ACTIVE,province_id:t,district_id:p,commune_id:j},resolver:Be(S)});r.exports.useEffect(()=>{a&&(m("id",a?a.id:""),m("user_code",a&&a.user_code?a.user_code:""),m("full_name",a&&a.info&&a.info.full_name?a.info.full_name:""),m("email",a&&a.info&&a.info.email?a.info.email:""),m("telephone",a&&a.info&&a.info.telephone?a.info.telephone:""),m("birthday",a&&a.info&&a.info.birthday?a.info.birthday:""),m("address",a&&a.info&&a.info.address?a.info.address:""),m("role",a?a.role:-1),m("status",a?a.status:-1),$(a&&a.info&&a.info.province_id?a.info.province_id:"-1"),J(a&&a.info&&a.info.district_id?a.info.district_id:"-1"),Q(a&&a.info&&a.info.commune_id?a.info.commune_id:"-1"))},[a]),r.exports.useEffect(()=>{t&&t!=-1?ie():x([]),le(!0)},[t]),r.exports.useEffect(()=>{p&&p!=-1?me():_([]),se(!0)},[t,p]),r.exports.useEffect(()=>{h&&m("province_id",t)},[h,t]),r.exports.useEffect(()=>{h&&w&&m("district_id",p)},[h,w,p]),r.exports.useEffect(()=>{h&&w&&X&&m("commune_id",j)},[h,w,X,j]);const ge=r.exports.useCallback(c=>{A(!0),B.put(ae.UPDATE,{...c}).then(u=>{u.data.code===P.HTTP_OK&&l({type:"success",message:u.data.message}),u.data.code===P.HTTP_NOT_FOUND&&l({type:"error",message:u.data.message}),s(!0),A(!1)}).catch(({response:u})=>{u.data.code===P.UNPROCESSABLE_ENTITY&&Object.keys(u.data.errors).forEach(Z=>{U(Z,{type:"custom",message:Object.values(u.data.errors[Z])})}),l({type:"error",message:u.data.message}),s(!0),A(!1)})},[]);return e.createElement(Pe,{redirectBack:F,handleUpdate:ge,toggleDirection:L,setToggleDirection:G,handleSubmit:oe,control:de,reset:ue,setValue:m,getValues:Ee,errors:pe,loading:W,showNoti:I,status:R,setShowNoti:s,setProvinceSelected:$,setDistrictSelected:J,setCommuneSelected:Q,province:V,district:H,commune:k})};export{Me as default};
