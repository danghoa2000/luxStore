import{Q as ge,H as ce,R as e,a$ as Oe,o as I,B as w,T as d,d as z,b7 as Pe,q as x,r as p,F as T,aE as Re,be as Y,u as he,G as k,C as P,N as X,O as Z,ar as ee,h as R,i as ve,v as se,aB as le,aS as we,bf as Be}from"./index.5ce80200.js";import{p as V}from"./index.834d2615.js";import{T as te}from"./TextField.f7bb6de6.js";import{C as Fe}from"./Chip.9e8533e0.js";import{R as Ae,F as Ee,a as pe}from"./RadioGroup.7a04bd2c.js";import{B as _e}from"./BorderColor.6ee4679d.js";import{C as be}from"./Call.484a3e82.js";import{S as $}from"./Select.fa04d544.js";import{S as Ie,s as K,a as ze,b as He,c as je,A as De,R as Me}from"./RateReview.2cdcdcbe.js";import{S as Ve}from"./Stack.5c2058c0.js";import"./OutlinedInput.63c5b1ce.js";const Le=ge(ce.jsx("path",{d:"M17 10H7v2h10v-2zm2-7h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zm-5-5H7v2h7v-2z"}),"EventNote"),Ue=ge([ce.jsx("path",{d:"M5 8h2v8H5zm7 0H9c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-1 6h-1v-4h1v4zm7-6h-3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-1 6h-1v-4h1v4z"},"0"),ce.jsx("path",{d:"M2 4v16h20V4H2zm2 14V6h16v12H4z"},"1")],"Money");const We=({CartItem:c,handleNext:i,addToCart:b,decreaseQty:f,totalPrice:a,activeStep:u,handleBack:g,data:l,setData:s})=>e.createElement(e.Fragment,null,e.createElement("div",{className:"container d-flex"},e.createElement("div",{className:"cart-details"},c.length===0&&e.createElement("h1",{className:"no-items product"},"No Items are add in Cart"),c.map(r=>{let o=r.price;r.sale_price&&(o=r.price-r.sale_price);const N=o*r.pivot.qty;return e.createElement("div",{className:"cart-list product cart-item d-flex",key:r.id},e.createElement("div",{className:"img"},e.createElement("img",{src:Oe+r.product.image,alt:""})),e.createElement("div",{className:"cart-details"},e.createElement("h3",null,r.product.name),e.createElement("h4",null,I(o)," ","* ",r.pivot.qty,e.createElement("span",null,I(N))),e.createElement("h4",null,Object.values(r.property_value).map(O=>O.attribute_value_name+", "))),e.createElement("div",{className:"cart-items-function"},e.createElement("div",{className:"removeCart"},e.createElement("button",{className:"removeCart"},e.createElement("i",{className:"fa-solid fa-xmark"}))),e.createElement("div",{className:"cartControl d-flex"},e.createElement("button",{className:"incCart",onClick:()=>b(r)},e.createElement("i",{className:"fa-solid fa-plus"})),e.createElement("button",{className:"desCart",onClick:()=>f(r)},e.createElement("i",{className:"fa-solid fa-minus"})))))})),e.createElement("div",{className:"cart-total product"},e.createElement("h2",null,"Cart Summary"),e.createElement("div",{className:"d-flex",style:{alignItems:"center"}},e.createElement("h4",null,"Total Price :"),e.createElement("h3",null," ",I(a))),e.createElement(w,{variant:"contained",className:"btn__checkcout",style:{margin:0},onClick:i,disabled:Object.keys(c).length===0},"Checkout Now")))),qe=({CartItem:c,handleNext:i,addToCart:b,decreaseQty:f,totalPrice:a,activeStep:u,handleBack:g,data:l,setData:s,address:r,currentAddress:o,setOpen:N,setStatus:O,setShowNoti:B})=>{var F,H,D,v,A;const y=n=>{var j,S;(j=n==null?void 0:n.voucher)!=null&&j.name?z.get(Pe.CHECK_VALID,{params:{coupon_code:(S=n==null?void 0:n.voucher)==null?void 0:S.name}}).then(_=>{_.data.code===x.HTTP_OK?s({...n,voucher:{...n.voucher,value:_==null?void 0:_.data.value,id:_==null?void 0:_.data.id}}):(B(!0),O({type:"warning",message:_.data.message||"Voucher is Invalid"}))}).catch(_=>{B(!0),O({type:"error",message:_!=null&&_.data?_.data.message:"Server error"})}):(B(!0),O({type:"warning",message:"Please enter your voucher!"}))};return e.createElement(e.Fragment,null,e.createElement("div",{className:"container d-flex"},e.createElement("div",{className:"cart-details"},e.createElement("div",{className:"cart-list product"},e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},"Shipping Address"),e.createElement("div",{className:"address"},Object.keys(o).length>0&&e.createElement("div",{style:{flexGrow:1,flexShrink:1}},e.createElement("div",{className:"address__contact"},e.createElement(d,{variant:"h8",style:{fontWeight:"bold"}},o==null?void 0:o.full_name),e.createElement("span",{style:{borderLeft:"1px solid rgba(0,0,0,.26)",margin:"0 8px"}}),e.createElement(d,{variant:"h8"},o==null?void 0:o.telephone)),e.createElement(d,{variant:"h8"},o==null?void 0:o.address)),e.createElement("div",{className:"address__tool"},e.createElement("span",{className:"change",onClick:()=>N(!0)},"Change")))),e.createElement("div",{className:"cart-list product cart-item"},e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},"Order detail"),c.map((n,j)=>{let S=n.price;n.sale_price&&n.sale_price!=0&&(S=n.price-n.sale_price);const _=S*n.pivot.qty;return e.createElement("div",{className:"d-flex",key:n.id},e.createElement("span",{style:{fontWeight:500,margin:20}},`${j+1},`),e.createElement("div",{className:"cart-details"},e.createElement("h3",null,n.product.name),e.createElement("h4",null,I(S)," ","* ",n.pivot.qty,e.createElement("span",null,I(_))),e.createElement("h4",null,Object.values(n.property_value).map(L=>L.attribute_value_name+", "))))})),e.createElement(w,{variant:"contained",className:"btn__view_cart",onClick:g},"Back to Cart"),e.createElement(w,{variant:"contained",className:"btn__checkcout",onClick:i},"Proceed to Payment")),e.createElement("div",{className:"cart-total product"},e.createElement("div",{className:"cart-total__box"},e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Subtotal:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},I(a))),e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Shipping:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},"-")),e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Tax:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},"-")),e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Discount:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},I(((F=l==null?void 0:l.voucher)==null?void 0:F.value)||0)))),e.createElement("h3",{style:{textAlign:"right"}}," ",I(a-((D=(H=l==null?void 0:l.voucher)==null?void 0:H.value)!=null?D:0))),e.createElement("label",{htmlFor:"",style:{marginBottom:10}},"Additional Comments",e.createElement("span",{style:{fontSize:12,color:"rgb(233, 69, 96)",margin:"0 10px",padding:"3px 10px",backgroundColor:"rgb(255, 225, 230)",borderRadius:3}},"Note")),e.createElement(te,{name:"note",multiline:!0,rows:4,value:l.note,onChange:n=>s({...l,note:n.target.value}),margin:"dense"}),(l==null?void 0:l.voucher)&&((v=l==null?void 0:l.voucher)==null?void 0:v.id)?e.createElement(Fe,{label:(A=l==null?void 0:l.voucher)==null?void 0:A.name,onDelete:()=>s({...l,voucher:{}})}):e.createElement(e.Fragment,null,e.createElement(te,{name:"voucher",variant:"outlined",placeholder:"Voucher",className:"voucher",margin:"dense",value:l.voucher.name||"",onChange:n=>s({...l,voucher:{...l.voucher,name:n.target.value}})}),e.createElement(w,{variant:"contained",className:"btn__view_cart",style:{margin:0},onClick:()=>y(l)},"Apply Voucher")))))};function Ke({totalPrice:c,setData:i,data:b,handelSubmit:f}){const a=p.exports.useRef();return p.exports.useEffect(()=>{window.paypal.Buttons({createOrder:(u,g,l)=>g.order.create({intent:"CAPTURE",purchase_units:[{description:"Cool looking table",amount:{currency_code:"USD",value:c}}]}),onApprove:async(u,g)=>{(await g.order.capture()).status==="COMPLETED"&&f({...b,orderStatus:1})},onError:u=>{console.log(u)}}).render(a.current)},[]),e.createElement("div",null,e.createElement("div",{ref:a}))}const $e=({handleNext:c,totalPrice:i,activeStep:b,handleBack:f,data:a,setData:u,handelSubmit:g})=>{var l,s,r;return e.createElement(e.Fragment,null,e.createElement("div",{className:"container d-flex"},e.createElement("div",{className:"cart-details"},e.createElement("div",{className:"cart-list product"},e.createElement(T,null,e.createElement(Ae,{name:"payment_method",value:a.paymentMethod,onChange:o=>u({...a,paymentMethod:o.target.value}),className:"ligth__mode"},e.createElement(Ee,{value:"1",control:e.createElement(pe,null),label:"Pay on delivery"}),e.createElement(Ee,{value:"2",control:e.createElement(pe,null),label:"Pay with Paypal"}),a.paymentMethod=="2"&&e.createElement("div",{style:{height:a.paymentMethod=="2"?"auto":"0",position:"relative",overflow:"hidden",transition:"height 0.5s",display:a.paymentMethod=="2"?"block":"none"}},e.createElement(Ke,{totalPrice:i,handelSubmit:g,data:a,setData:u}))))),e.createElement(w,{variant:"contained",className:"btn__view_cart",onClick:f},"Back to checkout details"),e.createElement(w,{variant:"contained",className:"btn__checkcout",disabled:a.paymentMethod=="2",onClick:()=>g(a)},"Confirm")),e.createElement("div",{className:"cart-total product"},e.createElement("div",{className:"cart-total__box"},e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Subtotal:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},I(i))),e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Shipping:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},a.shipping)),e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Tax:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},"0")),e.createElement("div",{className:"box__price"},e.createElement(d,{variant:"h7",className:"box__price__label"},"Discount:"),e.createElement(d,{variant:"h7",style:{fontWeight:"bold"}},(a==null?void 0:a.voucher)&&((l=a==null?void 0:a.voucher)==null?void 0:l.value)?(s=a.voucher)==null?void 0:s.value:0))),e.createElement("h3",{style:{textAlign:"right"}},I(Number(i)-(Number(((r=a==null?void 0:a.voucher)==null?void 0:r.value)||0)+Number(a.shipping)))),e.createElement("label",{htmlFor:"",style:{marginBottom:10}},e.createElement("span",{style:{fontSize:12,color:"rgb(233, 69, 96)",margin:"0 10px",padding:"3px 10px",backgroundColor:"rgb(255, 225, 230)",borderRadius:3}},"Note"),e.createElement(d,{variant:"h7",style:{display:"block"}},a.note)))))},Qe=({setType:c,address:i,currentAddress:b,getAddress:f,setStatus:a,setShowNoti:u})=>{const g=s=>{z.post(Y.SET_DEFAULT,{id:s}).then(r=>{r.data.code===x.HTTP_OK&&(u(!0),a({type:"success",message:r.data.message}),f())}).catch(({response:r})=>{u(!0),r.data.code===x.UNPROCESSABLE_ENTITY?Object.keys(r.data.errors).forEach(o=>{setError(o,{type:"custom",message:Object.values(r.data.errors[o])})}):r.data.code===x.HTTP_FOUND?a({type:"warning",message:r.data.message}):a({type:"error",message:r.data?r.data.message:"Server error"})})},l=s=>{z.delete(Y.DELETE+s).then(r=>{r.data.code===x.HTTP_OK&&(u(!0),a({type:"success",message:r.data.message}),f())}).catch(({response:r})=>{u(!0),r.data.code===x.UNPROCESSABLE_ENTITY?Object.keys(r.data.errors).forEach(o=>{setError(o,{type:"custom",message:Object.values(r.data.errors[o])})}):r.data.code===x.HTTP_FOUND?a({type:"warning",message:r.data.message}):a({type:"error",message:r.data?r.data.message:"Server error"})})};return e.createElement("div",{className:"my__address"},e.createElement("div",{className:"header"},e.createElement(d,{variant:"h6"},"My address"),e.createElement(w,{variant:"outlined",startIcon:e.createElement(Re,null),style:{background:"#ee4d2d"},onClick:()=>c(2)},"Add new address")),e.createElement("div",{className:"my__address__content"},Object.keys(i).length>0&&i.map(s=>e.createElement("div",{className:"address address__item",key:s.id},e.createElement("div",{className:"address__desc"},e.createElement("div",{className:"address__contact"},e.createElement(d,{variant:"h8",style:{fontWeight:"bold"}},s==null?void 0:s.full_name),e.createElement("span",{style:{borderLeft:"1px solid rgba(0,0,0,.26)",margin:"0 8px"}}),e.createElement(d,{variant:"h8"},s==null?void 0:s.telephone)),e.createElement(d,{variant:"h8"},s==null?void 0:s.address),s.id===b.id&&e.createElement("span",{className:"mark__default"},"Defaul")),e.createElement("div",{className:"address__tool"},e.createElement("div",{className:"d-flex"},e.createElement("span",{className:"change",style:{marginRight:3}},"update"),e.createElement("span",{className:"change",style:{marginLeft:3},onClick:()=>l(s.id)},"delete")),e.createElement(w,{variant:"contained",style:{textTransform:"capitalize",fontSize:12,padding:"5px 10px"},disabled:s.id===b.id,onClick:()=>g(s.id)},"Set default"))))))},Ge=({loading:c,setLoading:i,showNoti:b,status:f,setStatus:a,setShowNoti:u,province:g,district:l,commune:s,setProvinceSelected:r,setDistrictSelected:o,setCommuneSelected:N,provinceSelected:O,districtSelected:B,communeSelected:y,setType:F,getAddress:H})=>{const{handleSubmit:D,control:v,reset:A,setValue:n,getValues:j,setError:S,clearErrors:_,formState:{errors:L}}=he({shouldUnregister:!1,defaultValues:{province_id:O,district_id:B,commune_id:y,fullName:"",telephone:"",address:""}}),Q=m=>{i(!0),z.post(Y.CREATE,{...m}).then(t=>{t.data.code===x.HTTP_OK&&(u(!0),i(!1),a({type:"success",message:t.data.message}),A(),H())}).catch(({response:t})=>{u(!0),i(!1),console.log(t),t.data.code===x.UNPROCESSABLE_ENTITY?Object.keys(t.data.errors).forEach(C=>{S(C,{type:"custom",message:Object.values(t.data.errors[C])})}):t.data.code===x.HTTP_FOUND?a({type:"warning",message:t.data.message}):a({type:"error",message:t.data?t.data.message:"Server error"})})};return e.createElement("div",{className:"my__address"},e.createElement("div",{className:"header"},e.createElement(d,{variant:"h6"},"New address")),e.createElement("form",{onSubmit:D(Q)},e.createElement(k,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(k,{item:!0,xs:6},e.createElement(P,{name:"fullName",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement(X,{htmlFor:"fullName"},"Full name"," ",e.createElement("span",{className:"required"})),e.createElement(Z,{id:"fullName",...m,startAdornment:e.createElement(ee,{position:"start"},e.createElement(_e,null)),placeholder:"Enter your Full Name",onBlur:t=>{n(t.target.id,t.target.value?t.target.value.trim():"")}}))})),e.createElement(k,{item:!0,xs:6},e.createElement(P,{name:"telephone",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement(X,{htmlFor:"telephone"},"Telephone"),e.createElement(Z,{id:"telephone",...m,startAdornment:e.createElement(ee,{position:"start"},e.createElement(be,null)),placeholder:"xxx-xxx-xxxx",onBlur:t=>{n(t.target.id,t.target.value?t.target.value.trim():"")}}))})),e.createElement(k,{item:!0,xs:4},e.createElement(P,{name:"province_id",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement($,{className:"ligth__mode",...m,onChange:t=>{n(t.target.name,t.target.value),r(t.target.value)},label:"province",size:"small"},e.createElement(R,{value:-1},"select province"),g.length>0&&g.map(t=>e.createElement(R,{key:t.id,value:t.id},t.name))))})),e.createElement(k,{item:!0,xs:4},e.createElement(P,{name:"district_id",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement($,{className:"ligth__mode",...m,onChange:t=>{n(t.target.name,t.target.value),o(t.target.value)},label:"district_id",size:"small"},e.createElement(R,{value:-1},"select district"),l.length>0&&l.map(t=>e.createElement(R,{key:t.id,value:t.id},t.name))))})),e.createElement(k,{item:!0,xs:4},e.createElement(P,{name:"commune_id",control:v,className:"ligth__mode",render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement($,{className:"ligth__mode",onChange:t=>{n(t.target.name,t.target.value),N(t.target.value)},...m,label:"commune_id",size:"small"},e.createElement(R,{value:-1},"select commune"),s.length>0&&s.map(t=>e.createElement(R,{key:t.id,value:t.id},t.name))))})),e.createElement(k,{item:!0,xs:12},e.createElement(P,{name:"address",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement(te,{id:"address",...m,placeholder:"Enter your address",onBlur:t=>{n(t.target.id,t.target.value?t.target.value.trim():"")},multiline:!0,rows:4}))}))),e.createElement("div",{className:"d-flex justify-content-center w-100"},e.createElement(w,{variant:"contained",type:"submit",className:"m-1",disabled:c},c&&e.createElement(ve,{disableShrink:!0,style:{color:"white",width:"14px",height:"14px",margin:"0 5px 0 0"}}),"Create"),e.createElement(w,{variant:"contained",type:"reset",className:"m-1",color:"secondary",onClick:()=>{A(),F(1),r(-1),o(-1),N(-1)}},"Back"))))},Ye=({loading:c,setLoading:i,showNoti:b,status:f,setStatus:a,setShowNoti:u,province:g,district:l,commune:s,setProvinceSelected:r,setDistrictSelected:o,setCommuneSelected:N,provinceSelected:O,districtSelected:B,communeSelected:y,setType:F,getAddress:H})=>{const{handleSubmit:D,control:v,reset:A,setValue:n,getValues:j,setError:S,clearErrors:_,formState:{errors:L}}=he({shouldUnregister:!1,defaultValues:{province_id:O,district_id:B,commune_id:y,fullName:"",telephone:"",address:""}}),Q=m=>{i(!0),z.post(Y.CREATE,{...m}).then(t=>{t.data.code===x.HTTP_OK&&(u(!0),i(!1),a({type:"success",message:t.data.message}),A(),H())}).catch(({response:t})=>{u(!0),i(!1),console.log(t),t.data.code===x.UNPROCESSABLE_ENTITY?Object.keys(t.data.errors).forEach(C=>{S(C,{type:"custom",message:Object.values(t.data.errors[C])})}):t.data.code===x.HTTP_FOUND?a({type:"warning",message:t.data.message}):a({type:"error",message:t.data?t.data.message:"Server error"})})};return e.createElement("div",{className:"my__address"},e.createElement("div",{className:"header"},e.createElement(d,{variant:"h6"},"New address")),e.createElement("form",{onSubmit:D(Q)},e.createElement(k,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(k,{item:!0,xs:6},e.createElement(P,{name:"fullName",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement(X,{htmlFor:"fullName"},"Full name"," ",e.createElement("span",{className:"required"})),e.createElement(Z,{id:"fullName",...m,startAdornment:e.createElement(ee,{position:"start"},e.createElement(_e,null)),placeholder:"Enter your Full Name",onBlur:t=>{n(t.target.id,t.target.value?t.target.value.trim():"")}}))})),e.createElement(k,{item:!0,xs:6},e.createElement(P,{name:"telephone",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement(X,{htmlFor:"telephone"},"Telephone"),e.createElement(Z,{id:"telephone",...m,startAdornment:e.createElement(ee,{position:"start"},e.createElement(be,null)),placeholder:"xxx-xxx-xxxx",onBlur:t=>{n(t.target.id,t.target.value?t.target.value.trim():"")}}))})),e.createElement(k,{item:!0,xs:4},e.createElement(P,{name:"province_id",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement($,{className:"ligth__mode",...m,onChange:t=>{n(t.target.name,t.target.value),r(t.target.value)},label:"province",size:"small"},e.createElement(R,{value:-1},"select province"),g.length>0&&g.map(t=>e.createElement(R,{key:t.id,value:t.id},t.name))))})),e.createElement(k,{item:!0,xs:4},e.createElement(P,{name:"district_id",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement($,{className:"ligth__mode",...m,onChange:t=>{n(t.target.name,t.target.value),o(t.target.value)},label:"district_id",size:"small"},e.createElement(R,{value:-1},"select district"),l.length>0&&l.map(t=>e.createElement(R,{key:t.id,value:t.id},t.name))))})),e.createElement(k,{item:!0,xs:4},e.createElement(P,{name:"commune_id",control:v,className:"ligth__mode",render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement($,{className:"ligth__mode",onChange:t=>{n(t.target.name,t.target.value),N(t.target.value)},...m,label:"commune_id",size:"small"},e.createElement(R,{value:-1},"select commune"),s.length>0&&s.map(t=>e.createElement(R,{key:t.id,value:t.id},t.name))))})),e.createElement(k,{item:!0,xs:12},e.createElement(P,{name:"address",control:v,render:({field:m})=>e.createElement(T,{variant:"standard"},e.createElement(te,{id:"address",...m,placeholder:"Enter your address",onBlur:t=>{n(t.target.id,t.target.value?t.target.value.trim():"")},multiline:!0,rows:4}))}))),e.createElement("div",{className:"d-flex justify-content-center w-100"},e.createElement(w,{variant:"contained",type:"submit",className:"m-1",disabled:c},c&&e.createElement(ve,{disableShrink:!0,style:{color:"white",width:"14px",height:"14px",margin:"0 5px 0 0"}}),"Create"),e.createElement(w,{variant:"contained",type:"reset",className:"m-1",color:"secondary",onClick:()=>{A(),F(1),r(-1),o(-1),N(-1)}},"Back"))))};se("div")(({theme:c,ownerState:i})=>({color:c.palette.mode==="dark"?c.palette.grey[700]:"#eaeaf0",display:"flex",height:22,alignItems:"center",...i.active&&{color:"#784af4"},"& .QontoStepIcon-completedIcon":{color:"#784af4",zIndex:1,fontSize:18},"& .QontoStepIcon-circle":{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"}}));V.exports.bool,V.exports.string,V.exports.bool;const Je=se(Ie)(({theme:c})=>({[`&.${K.alternativeLabel}`]:{top:22},[`&.${K.active}`]:{[`& .${K.line}`]:{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},[`&.${K.completed}`]:{[`& .${K.line}`]:{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},[`& .${K.line}`]:{height:3,border:0,backgroundColor:c.palette.mode==="dark"?c.palette.grey[800]:"#eaeaf0",borderRadius:1}})),Xe=se("div")(({theme:c,ownerState:i})=>({backgroundColor:c.palette.mode==="dark"?c.palette.grey[700]:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center",...i.active&&{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},...i.completed&&{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}}));function fe(c){const{active:i,completed:b,className:f}=c,a={1:e.createElement(De,null),2:e.createElement(Le,null),3:e.createElement(Ue,null),4:e.createElement(Me,null)};return e.createElement(Xe,{ownerState:{completed:b,active:i},className:f},a[String(c.icon)])}fe.propTypes={active:V.exports.bool,className:V.exports.string,completed:V.exports.bool,icon:V.exports.node};const ne=["Cart","Details","Payment","Review"],it=({CartItem:c,addToCart:i,decreaseQty:b,getCart:f,showNoti:a,setShowNoti:u,status:g,setStatus:l})=>{const[s,r]=p.exports.useState(!1),[o,N]=p.exports.useState(1),[O,B]=p.exports.useState(!1),[y,F]=p.exports.useState(0),[H,D]=p.exports.useState({}),[v,A]=p.exports.useState([]),[n,j]=p.exports.useState({}),[S,_]=p.exports.useState([]),[L,Q]=p.exports.useState([]),[m,t]=p.exports.useState([]),[C,oe]=p.exports.useState(-1),[M,me]=p.exports.useState(-1),[ie,de]=p.exports.useState(-1),G=c.reduce((E,h)=>{let q=h.price;return h.sale_price&&(q=h.price-h.sale_price),E+h.pivot.qty*q},0),[U,W]=p.exports.useState({cart:c,address:"",discount:0,shipping:0,note:"",voucher:{},paymentMethod:"1",totalPrice:G,orderStatus:1}),ue=()=>ne.length,ye=()=>Object.keys(H).length,xe=()=>y===ue()-1,Ne=()=>ye()===ue(),ae=()=>{const E=xe()&&!Ne()?ne.findIndex((h,q)=>!(q in H)):y+1;F(E)},re=()=>{F(E=>E-1)},Ce=E=>{z.post(Be.CREATE,{...E}).then(h=>{u(!0),h.data.code===x.HTTP_OK?(F(0),l({type:"success",message:h.data.message}),f()):l({type:"warning",message:h.data.message})}).catch(h=>{u(!0),l({type:"error",message:h!=null&&h.data?h.data.message:"Server error"})})},J=()=>{z.get(Y.LIST).then(E=>{if(E.data.code===x.HTTP_OK){A(E.data.address);const h=E.data.address.find(q=>q.status==1);h?(W({...U,address:JSON.stringify(h)}),j(h)):(W({...U,address:""}),j({}))}}).catch(E=>{console.log("error!")})};p.exports.useEffect(()=>{J()},[]),p.exports.useEffect(()=>{W({...U,cart:c,totalPrice:G})},[c]);const ke=p.exports.useCallback(()=>{z.get(le+"api/get-province").then(E=>_(E.data.provinces)).catch(E=>{setError(!0)})},[]),Se=p.exports.useCallback(()=>{z.get(le+"api/get-district/"+C).then(E=>Q(E.data.districts)).catch(E=>{setError(!0)})},[C]),Te=p.exports.useCallback(()=>{z.get(le+"api/get-commune/"+M).then(E=>t(E.data.communes)).catch(E=>{setError(!0)})},[M]);return p.exports.useEffect(()=>{ke()},[]),p.exports.useEffect(()=>{C&&C!=-1&&Se()},[C]),p.exports.useEffect(()=>{M&&M!=-1&&Te()},[C,M]),e.createElement("section",{className:"cart-items"},e.createElement("div",{className:"container"},e.createElement(Ve,{sx:{width:"100%"},spacing:4},e.createElement(ze,{alternativeLabel:!0,activeStep:y,connector:e.createElement(Je,null)},ne.map((E,h)=>e.createElement(He,{key:E},e.createElement(je,{StepIconComponent:fe},E)))))),e.createElement("div",null,y==0&&e.createElement(We,{CartItem:c,handleNext:ae,addToCart:i,decreaseQty:b,totalPrice:G,activeStep:y,handleBack:re,data:U,setData:W}),y==1&&e.createElement(qe,{CartItem:c,handleNext:ae,addToCart:i,decreaseQty:b,totalPrice:G,activeStep:y,handleBack:re,data:U,setData:W,address:v,currentAddress:n,setOpen:r,setStatus:l,setShowNoti:u}),y==2&&e.createElement($e,{CartItem:c,handleNext:ae,totalPrice:G,activeStep:y,handleBack:re,data:U,setData:W,handelSubmit:Ce})),s&&e.createElement(we,{open:s,handleClose:()=>{r(!1),N(1)},className:"ligth__mode"},o==1&&e.createElement(Qe,{setType:N,address:v,currentAddress:n,getAddress:J,setStatus:l,setShowNoti:u}),o==2&&e.createElement(Ye,{loading:O,setLoading:B,showNoti:a,status:g,setStatus:l,setShowNoti:u,province:S,district:L,commune:m,setProvinceSelected:oe,setDistrictSelected:me,setCommuneSelected:de,provinceSelected:C,districtSelected:M,communeSelected:ie,setType:N,getAddress:J}),o==3&&e.createElement(Ge,{loading:O,setLoading:B,showNoti:a,status:g,setStatus:l,setShowNoti:u,province:S,district:L,commune:m,setProvinceSelected:oe,setDistrictSelected:me,setCommuneSelected:de,provinceSelected:C,districtSelected:M,communeSelected:ie,setType:N,getAddress:J})))};export{it as default};
