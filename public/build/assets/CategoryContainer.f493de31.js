import{a7 as Q,u as X,r as d,R as e,G as T,C as k,F as x,h as y,a8 as R,a9 as v,B as L,c as D,T as K,aa as Z,ab as ee,ac as te,S as ae,d as H,ad as U,q as O,ae as re}from"./index.5ce80200.js";import{T as se,a as ne,E as oe,b as ce,c as le,d as z,e as ie}from"./EnhancedTableHead.4e137c38.js";import{C as me,R as de}from"./pathUrl.54e42181.js";import{T as V}from"./TextField.f7bb6de6.js";import{S as M}from"./Select.fa04d544.js";import{B as ue}from"./Breadcrumbs.f5b119d2.js";import{S as ge}from"./Search.7dacac20.js";import{A as Ee}from"./AddCircleSharp.04bafc2d.js";import{C as pe,R as ye}from"./ReportProblem.91ad1bc7.js";import{B as be}from"./BorderColor.6ee4679d.js";import"./KeyboardArrowRight.e41f0be0.js";import"./LastPage.e4998160.js";import"./OutlinedInput.63c5b1ce.js";const _e=c=>{const{headCells:a,setSearchFiled:f,groupCategoryList:b}=c,[n]=Q(),{handleSubmit:C,control:l,reset:h,setValue:E,getValues:P}=X({defaultValues:{category_code:"",name:"",status:-1,group_category_id:-1,description:"",created_by:""}}),p=d.exports.useMemo(()=>{const i=[];return Object.keys(a).forEach((t,g)=>{a[t].id!=="province_id"&&a[t].id!=="district_id"&&a[t].id!=="commune_id"&&(a[t].type==="date"?i.push(e.createElement(T,{item:!0,xs:4,key:g},e.createElement(k,{name:a[t].id,control:l,render:({field:s})=>e.createElement(x,{variant:"standard"},e.createElement(V,{...s,label:n(a[t].label),type:"date",size:"small",InputLabelProps:{shrink:!0},onBlur:o=>{E(a[t].id,o.target.value?o.target.value.trim():"")}}))}))):a[t].id==="role"?i.push(e.createElement(T,{item:!0,xs:4,key:g},e.createElement(k,{name:a[t].id,control:l,render:({field:s})=>e.createElement(x,{variant:"standard"},e.createElement(M,{...s,label:n(a[t].label),size:"small"},e.createElement(y,{value:-1},"select option"),e.createElement(y,{value:R.EMPLOYEE},n(`role.${R.EMPLOYEE}`)),e.createElement(y,{value:R.MANAGER},n(`role.${R.MANAGER}`))))}))):a[t].id==="status"?i.push(e.createElement(T,{item:!0,xs:4,key:g},e.createElement(k,{name:a[t].id,control:l,render:({field:s})=>e.createElement(x,{variant:"standard"},e.createElement(M,{...s,label:n(a[t].label),size:"small"},e.createElement(y,{key:"",value:-1},"select option"),e.createElement(y,{key:v.ACTIVE,value:v.ACTIVE},n(`status.${v.ACTIVE}`)),e.createElement(y,{key:v.BLOCK,value:v.BLOCK},n(`status.${v.BLOCK}`))))}))):a[t].id==="group_category_id"?i.push(e.createElement(T,{item:!0,xs:4,key:g},e.createElement(k,{name:a[t].id,control:l,render:({field:s})=>e.createElement(x,{variant:"standard"},e.createElement(M,{...s,label:n("category.list.table.group_category_id"),size:"small"},e.createElement(y,{key:"",value:-1},"select group category"),b.length>0&&b.map(o=>e.createElement(y,{key:o.id,value:o.id},o.name))))}))):i.push(e.createElement(T,{item:!0,xs:4,key:g},e.createElement(k,{name:a[t].id,control:l,render:({field:s})=>e.createElement(x,{variant:"standard"},e.createElement(V,{...s,label:n(a[t].label),size:"small",onBlur:o=>{E(a[t].id,o.target.value?o.target.value.trim():"")}}))}))))}),i},[b]),u=i=>{f(i)};return e.createElement("div",null,e.createElement("form",{onSubmit:C(u)},e.createElement(T,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},p,e.createElement("div",{className:"d-flex w-100"},e.createElement(L,{variant:"contained",type:"submit",className:"m-1",style:{background:"#28a745"}},"Search"),e.createElement(L,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>{h(),f({})}},"Clear")))))},Se=c=>{const{open:a,setOpen:f,order:b,orderBy:n,page:C,rowsPerPage:l,handleRequestSort:h,handleChangePage:E,handleChangeRowsPerPage:P,redirectCategoryCreate:p,headCells:u,categoryList:i,showNoti:t,status:g,setShowNoti:s,setSearchFiled:o,totalRecord:N,deleteCategory:A,groupCategoryList:B}=c,F=D();return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(K,{variant:"h4",gutterBottom:!0},"Brand"),e.createElement(ue,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(Z,{to:"/admin"},"Home"),e.createElement(K,null,"Brand"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(L,{variant:"contained",onClick:()=>f(!a)},"Filter ",e.createElement(ge,{sx:{marginLeft:1}})),e.createElement(L,{variant:"contained",onClick:()=>p(),sx:{marginLeft:2}},"Create ",e.createElement(Ee,{sx:{marginLeft:1}}))),e.createElement(pe,{in:a,timeout:"auto",unmountOnExit:!0},e.createElement("div",{className:"card__admin"},e.createElement(_e,{headCells:u,setSearchFiled:o,groupCategoryList:B}))),e.createElement("div",{className:"card__admin"},e.createElement(ee,{style:{margin:"-25px"}},e.createElement(se,{sx:{maxHeight:600},className:"table__dark"},e.createElement(ne,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,"aria-label":"sticky table"},e.createElement(oe,{order:b,orderBy:n,onRequestSort:h,headCells:u}),e.createElement(ce,null,i.length>0?i.map((_,w)=>e.createElement(le,{hover:!0,key:w},e.createElement(z,{component:"td",scope:"row",padding:"normal"},e.createElement(be,{color:"primary",className:"action",onClick:()=>{F(me.UPDATE,{state:{id:_.id}})}}),e.createElement("span",{className:"tool"}),e.createElement(de,{color:"error",className:"action",onClick:()=>A(_.id)})),Object.keys(u).map((S,I)=>e.createElement(z,{component:"td",key:I,scope:"row",padding:"normal"},u[S].render?u[S].convert?te(u[S].render(_)):u[S].render(_):_[S])))):e.createElement(z,{align:"center",colSpan:Object.keys(u).length+1,style:{opacity:.5,height:"100px"}},e.createElement(ye,null)," No data")))),e.createElement(ie,{rowsPerPageOptions:[5,10,25],component:"div",className:"paginate__admin",count:N,rowsPerPage:l,page:C,onPageChange:E,onRowsPerPageChange:P}))),t&&e.createElement(ae,{type:g.type,message:g.message,setShowNoti:s}))},fe={category_code:{id:"category_code",numeric:!1,label:"category.list.table.category_code",type:"text"},status:{id:"status",numeric:!0,label:"category.list.table.status",convert:!0,render:c=>`status.${c.status}`,type:"status"},name:{id:"name",numeric:!0,label:"category.list.table.name"},group_category_id:{id:"group_category_id",numeric:!0,label:"category.list.table.group_category_id",render:c=>c.group_category?c.group_category.name:""},description:{id:"description",numeric:!0,label:"category.list.table.description"},created_by:{id:"created_by",numeric:!0,label:"category.list.table.created_by",render:c=>c.created_by&&c.created_by.info?c.created_by.info.full_name:""}},Fe=()=>{const[c,a]=d.exports.useState([]),[f,b]=e.useState(!0),[n,C]=e.useState("asc"),[l,h]=e.useState("category_code"),[E,P]=e.useState(0),[p,u]=e.useState(5),[i,t]=d.exports.useState({}),[g,s]=d.exports.useState(!1),[o,N]=d.exports.useState({}),[A,B]=d.exports.useState(0),[F,_]=d.exports.useState([]),w=D(),S={...fe},I=(m,r)=>{C(l===r&&n==="asc"?"desc":"asc"),h(r)},Y=(m,r)=>{P(r)},$=m=>{u(parseInt(m.target.value,10)),P(0)},q=d.exports.useCallback(()=>{w("/admin/categories/create")},[]),j=d.exports.useCallback(()=>{const m={searchField:o,pageSize:p,currentPage:E,currentSort:l,currentDirection:n};H.get(U.LIST,{params:{...m}}).then(r=>{r.data.code===O.HTTP_OK&&(a(r.data.categories),B(r.data.total))}).catch(r=>{t({type:"error",message:r.data?r.data.message:"Server error"}),s(!0)})},[n,l,E,p,o]);d.exports.useEffect(()=>{j()},[n,l,E,p,o]);const W=d.exports.useCallback(m=>{H.delete(U.DELETE+"/"+m).then(r=>{r.data.code===O.HTTP_OK&&(t({type:"success",message:r.data.message}),s(!0),j()),r.data.code===O.HTTP_NOT_FOUND&&(s(!0),t({type:"error",message:r.data.message}))}).catch(({response:r})=>{r.data.code===O.UNPROCESSABLE_ENTITY&&Object.keys(r.data.errors).forEach(G=>{setError(G,{type:"custom",message:Object.values(r.data.errors[G])})}),t({type:"error",message:r.data?r.data.message:"Server error"}),s(!0)})},[]),J=d.exports.useCallback(()=>{H.get(re.LIST).then(m=>{m.data.code===O.HTTP_OK&&_(m.data.groupCategories)}).catch(m=>{t({type:"error",message:m.data?m.data.message:"Server error"}),s(!0)})},[]);return d.exports.useEffect(()=>{J()},[]),e.createElement(Se,{open:f,setOpen:b,order:n,orderBy:l,page:E,rowsPerPage:p,handleRequestSort:I,handleChangePage:Y,handleChangeRowsPerPage:$,redirectCategoryCreate:q,headCells:S,categoryList:c,showNoti:g,status:i,setShowNoti:s,setSearchFiled:N,totalRecord:A,deleteCategory:W,groupCategoryList:F})};export{Fe as default};
