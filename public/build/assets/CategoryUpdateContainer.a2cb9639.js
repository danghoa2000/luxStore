import{a7 as V,R as e,T as b,aa as U,B as k,G as u,C as E,F as p,N as F,O as L,ar as I,as as W,h as P,at as $,i as J,S as Q,c as X,r as o,ay as Z,au as ee,av as te,d as O,ad as R,q as y,u as ae,ae as re,a9 as se,aw as oe}from"./index.5ce80200.js";import{B as ce}from"./Breadcrumbs.f5b119d2.js";import{B as ne}from"./BorderColor.6ee4679d.js";import{S as le}from"./Select.fa04d544.js";import{T as me}from"./TextField.f7bb6de6.js";import{R as ie,F as D,a as G}from"./RadioGroup.7a04bd2c.js";import"./OutlinedInput.63c5b1ce.js";const de=v=>{const{redirectBack:x,handleUpdate:S,toggleDirection:A,setToggleDirection:_,handleSubmit:C,control:r,reset:N,setValue:i,getValues:t,errors:n,loading:g,showNoti:T,status:h,setShowNoti:B,groupCategoryList:f}=v,[l]=V();return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(b,{variant:"h4",gutterBottom:!0},"Brand"),e.createElement(ce,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(U,{to:"/admin"},"Home"),e.createElement(U,{to:"/admin/categories"},"Brand"),e.createElement(b,null,"Update"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(k,{variant:"contained",onClick:()=>x()},"Back")),e.createElement("form",{onSubmit:C(S)},e.createElement("div",{className:"card__admin"},e.createElement(b,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Basic information"),e.createElement(u,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(u,{item:!0,xs:6},e.createElement(E,{name:"category_code",control:r,render:({field:c})=>e.createElement(p,{variant:"standard"},e.createElement(F,{htmlFor:""},l("category.list.table.category_code"),e.createElement("span",{className:"required"})),e.createElement(L,{...c,startAdornment:e.createElement(I,{position:"start"},e.createElement(W,null)),placeholder:l("placehoder",{name:l("category.list.table.category_code")}),onBlur:s=>{i(s.target.id,s.target.value?s.target.value.trim():"")}}))}),n.category_code&&e.createElement("p",{className:"text-danger"},n.category_code.message)),e.createElement(u,{item:!0,xs:6},e.createElement(E,{name:"name",control:r,render:({field:c})=>e.createElement(p,{variant:"standard"},e.createElement(F,{htmlFor:"fullName"},l("category.list.table.name")),e.createElement(L,{id:"fullName",...c,startAdornment:e.createElement(I,{position:"start"},e.createElement(ne,null)),placeholder:l("placehoder",{name:l("category.list.table.name")}),onBlur:s=>{i(s.target.id,s.target.value?s.target.value.trim():"")}}))}),n.name&&e.createElement("p",{className:"text-danger"},n.name.message)),e.createElement(u,{item:!0,xs:6},e.createElement(E,{name:"group_category_id",control:r,render:({field:c})=>e.createElement(p,{variant:"standard"},e.createElement(le,{...c,label:l("category.list.table.group_category_id"),size:"small"},e.createElement(P,{key:"",value:-1,disabled:!0},"select group category"),f.length>0&&f.map(s=>e.createElement(P,{key:"",value:s.id},s.name))))}),n.group_category_id&&e.createElement("p",{className:"text-danger"},n.group_category_id.message)),e.createElement(u,{item:!0,xs:6},e.createElement(E,{name:"description",control:r,render:({field:c})=>e.createElement(p,{variant:"standard"},e.createElement(me,{...c,label:l("category.list.table.description"),multiline:!0,maxRows:4,variant:"standard"}))}),n.description&&e.createElement("p",{className:"text-danger"},n.description.message)))),e.createElement("div",{className:"card__admin"},e.createElement(b,{variant:"h5",className:"cart_admin_title",gutterBottom:!0},"Setting"),e.createElement(u,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},e.createElement(u,{item:!0,xs:6},e.createElement("div",{className:"d-inline"},e.createElement(E,{name:"status",control:r,render:({field:c})=>e.createElement(p,null,e.createElement($,{id:"status"},"Status",e.createElement("span",{className:"required"})),e.createElement(ie,{defaultValue:"1",...c,checked:"1"},e.createElement(D,{value:"1",control:e.createElement(G,null),label:"Active"}),e.createElement(D,{value:"0",control:e.createElement(G,null),label:"Block"})))}))))),e.createElement("div",{className:"d-flex justify-content-center w-100"},e.createElement(k,{variant:"contained",type:"submit",className:"m-1",disabled:g},g&&e.createElement(J,{disableShrink:!0,style:{color:"white",width:"14px",height:"14px",margin:"0 5px 0 0"}}),"Update"),e.createElement(k,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>N()},"Clear"))),T&&e.createElement(Q,{type:h.type,message:h.message,setShowNoti:B}))},fe=()=>{const v=X(),[x,S]=o.exports.useState(!1),[A,_]=o.exports.useState(!1),[C,r]=o.exports.useState({}),[N,i]=o.exports.useState(!1),[t,n]=o.exports.useState(),{state:g}=Z(),[T,h]=o.exports.useState([]),[B]=V(),f=()=>v(-1),l=ee().shape({category_code:te().required(B("validate.required",{name:"Category code"}))}),c=o.exports.useCallback(()=>{O.get(R.SHOW,{params:{id:g.id}}).then(a=>{n(a.data.category),a.data.code===y.HTTP_NOT_FOUND&&(r({type:"error",message:a.data.message}),i(!0))}).catch(({response:a})=>{r({type:"error",message:a.data?a.data.message:"Server error"}),i(!0)})},[g]);o.exports.useEffect(()=>{c()},[g]);const{handleSubmit:s,control:H,reset:q,setValue:d,getValues:j,setError:K,formState:{errors:Y}}=ae({shouldUnregister:!1,defaultValues:{category_code:"",name:"",status:se.ACTIVE,group_category_id:"",description:""},resolver:oe(l)}),z=o.exports.useCallback(a=>{_(!0),O.put(R.UPDATE,{...a}).then(m=>{m.data.code===y.HTTP_OK&&r({type:"success",message:m.data.message}),m.data.code===y.HTTP_NOT_FOUND&&r({type:"error",message:m.data.message}),i(!0),_(!1)}).catch(({response:m})=>{m.data.code===y.UNPROCESSABLE_ENTITY&&Object.keys(m.data.errors).forEach(w=>{K(w,{type:"custom",message:Object.values(m.data.errors[w])})}),r({type:"error",message:m.data?m.data.message:"Server error"}),i(!0),_(!1)})},[]),M=o.exports.useCallback(()=>{O.get(re.LIST).then(a=>{a.data.code===y.HTTP_OK&&h(a.data.groupCategories)}).catch(a=>{r({type:"error",message:a.data?a.data.message:"Server error"}),i(!0)})},[]);return o.exports.useEffect(()=>{M()},[]),o.exports.useEffect(()=>{d("id",t?t.id:""),d("category_code",t?t.category_code:""),d("name",t?t.name:""),d("status",t?t.status:-1),d("group_category_id",t?t.group_category_id:""),d("description",t?t.description:"")},[t]),e.createElement(de,{redirectBack:f,handleUpdate:z,toggleDirection:x,setToggleDirection:S,handleSubmit:s,control:H,reset:q,setValue:d,getValues:j,errors:Y,loading:A,showNoti:N,status:C,setShowNoti:i,groupCategoryList:T})};export{fe as default};
