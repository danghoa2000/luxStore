import{a7 as q,u as W,r as m,R as e,G as P,C as R,F as O,h as _,a8 as x,a9 as h,B as A,c as D,T as U,aa as J,ab as Q,aB as X,ac as Z,S as ee,d as M,ae as j,q as N}from"./index.5ce80200.js";import{T as te,a as ae,E as re,b as se,c as oe,d as L,e as ne}from"./EnhancedTableHead.4e137c38.js";import{G as ce,R as le}from"./pathUrl.54e42181.js";import{T as z}from"./TextField.f7bb6de6.js";import{S as V}from"./Select.fa04d544.js";import{B as me}from"./Breadcrumbs.f5b119d2.js";import{S as ie}from"./Search.7dacac20.js";import{A as ue}from"./AddCircleSharp.04bafc2d.js";import{C as de,R as ge}from"./ReportProblem.91ad1bc7.js";import{B as pe}from"./BorderColor.6ee4679d.js";import"./KeyboardArrowRight.e41f0be0.js";import"./LastPage.e4998160.js";import"./OutlinedInput.63c5b1ce.js";const Ee=y=>{const{headCells:t,setSearchFiled:v}=y,[n]=q(),{handleSubmit:i,control:g,reset:u,setValue:T,getValues:b}=W({defaultValues:{group_category_code:"",name:"",status:-1}}),f=m.exports.useMemo(()=>{const s=[];return Object.keys(t).forEach((r,l)=>{t[r].id!=="province_id"&&t[r].id!=="district_id"&&t[r].id!=="commune_id"&&(t[r].type==="date"?s.push(e.createElement(P,{item:!0,xs:4,key:l},e.createElement(R,{name:t[r].id,control:g,render:({field:c})=>e.createElement(O,{variant:"standard"},e.createElement(z,{...c,label:n(t[r].label),type:"date",size:"small",InputLabelProps:{shrink:!0},onBlur:o=>{T(t[r].id,o.target.value?o.target.value.trim():"")}}))}))):t[r].id==="role"?s.push(e.createElement(P,{item:!0,xs:4,key:l},e.createElement(R,{name:t[r].id,control:g,render:({field:c})=>e.createElement(O,{variant:"standard"},e.createElement(V,{...c,label:n(t[r].label),size:"small"},e.createElement(_,{value:-1},"select option"),e.createElement(_,{value:x.EMPLOYEE},n(`role.${x.EMPLOYEE}`)),e.createElement(_,{value:x.MANAGER},n(`role.${x.MANAGER}`))))}))):t[r].id==="status"?s.push(e.createElement(P,{item:!0,xs:4,key:l},e.createElement(R,{name:t[r].id,control:g,render:({field:c})=>e.createElement(O,{variant:"standard"},e.createElement(V,{...c,label:n(t[r].label),size:"small"},e.createElement(_,{key:"",value:-1},"select option"),e.createElement(_,{key:h.ACTIVE,value:h.ACTIVE},n(`status.${h.ACTIVE}`)),e.createElement(_,{key:h.BLOCK,value:h.BLOCK},n(`status.${h.BLOCK}`))))}))):s.push(e.createElement(P,{item:!0,xs:4,key:l},e.createElement(R,{name:t[r].id,control:g,render:({field:c})=>e.createElement(O,{variant:"standard"},e.createElement(z,{...c,label:n(t[r].label),size:"small",onBlur:o=>{T(t[r].id,o.target.value?o.target.value.trim():"")}}))}))))}),s},[]),p=s=>{v(s)};return e.createElement("div",null,e.createElement("form",{onSubmit:i(p)},e.createElement(P,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},f,e.createElement("div",{className:"d-flex w-100"},e.createElement(A,{variant:"contained",type:"submit",className:"m-1",style:{background:"#28a745"}},"Search"),e.createElement(A,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>{u(),v({})}},"Clear")))))},ye=y=>{const{open:t,setOpen:v,order:n,orderBy:i,page:g,rowsPerPage:u,handleRequestSort:T,handleChangePage:b,handleChangeRowsPerPage:f,redirectGroupCategoryCreate:p,headCells:s,groupCategoryList:r,showNoti:l,status:c,setShowNoti:o,setSearchFiled:C,totalRecord:B,deleteGroupCategory:G}=y,F=D();return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(U,{variant:"h4",gutterBottom:!0},"Group Category"),e.createElement(me,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(J,{to:"/admin"},"Home"),e.createElement(U,null,"Group Category"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(A,{variant:"contained",onClick:()=>v(!t)},"Filter ",e.createElement(ie,{sx:{marginLeft:1}})),e.createElement(A,{variant:"contained",onClick:()=>p(),sx:{marginLeft:2}},"Create ",e.createElement(ue,{sx:{marginLeft:1}}))),e.createElement(de,{in:t,timeout:"auto",unmountOnExit:!0},e.createElement("div",{className:"card__admin"},e.createElement(Ee,{headCells:s,setSearchFiled:C}))),e.createElement("div",{className:"card__admin"},e.createElement(Q,{style:{margin:"-25px"}},e.createElement(te,{sx:{maxHeight:600},className:"table__dark"},e.createElement(ae,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,"aria-label":"sticky table"},e.createElement(re,{order:n,orderBy:i,onRequestSort:T,headCells:s}),e.createElement(se,null,r.length>0?r.map((E,w)=>e.createElement(oe,{hover:!0,key:w},e.createElement(L,{component:"td",scope:"row",padding:"normal"},e.createElement(pe,{color:"primary",className:"action",onClick:()=>{F(ce.UPDATE,{state:{id:E.id}})}}),e.createElement("span",{className:"tool"}),e.createElement(le,{color:"error",className:"action",onClick:()=>G(E.id)})),Object.keys(s).map((d,k)=>s[d].id=="image"?e.createElement(L,{component:"td",key:k,scope:"row",style:{padding:10}},e.createElement("img",{src:X+E[d],alt:"",style:{height:150,width:350,margin:"auto",display:"block"}})):e.createElement(L,{component:"td",key:k,scope:"row",padding:"normal"},s[d].render?s[d].convert?Z(s[d].render(E)):s[d].render(E):E[d])))):e.createElement(L,{align:"center",colSpan:Object.keys(s).length+1,style:{opacity:.5,height:"100px"}},e.createElement(ge,null)," No data")))),e.createElement(ne,{rowsPerPageOptions:[5,10,25],component:"div",className:"paginate__admin",count:B,rowsPerPage:u,page:g,onPageChange:b,onRowsPerPageChange:f}))),l&&e.createElement(ee,{type:c.type,message:c.message,setShowNoti:o}))},be={image:{id:"image",numeric:!1,label:"product.list.table.image",type:"text"},group_category_code:{id:"group_category_code",numeric:!1,label:"group_category.list.table.group_category_code",type:"text"},status:{id:"status",numeric:!0,label:"group_category.list.table.status",convert:!0,render:y=>`status.${y.status}`,type:"status"},name:{id:"name",numeric:!0,label:"group_category.list.table.name"}},Le=()=>{const[y,t]=m.exports.useState([]),[v,n]=e.useState(!0),[i,g]=e.useState("asc"),[u,T]=e.useState("group_category_code"),[b,f]=e.useState(0),[p,s]=e.useState(5),[r,l]=m.exports.useState({}),[c,o]=m.exports.useState(!1),[C,B]=m.exports.useState({}),[G,F]=m.exports.useState(0),E=D(),w={...be},d=(S,a)=>{g(u===a&&i==="asc"?"desc":"asc"),T(a)},k=(S,a)=>{f(a)},K=S=>{s(parseInt(S.target.value,10)),f(0)},Y=m.exports.useCallback(()=>{E("/admin/group-category/create")},[]),H=m.exports.useCallback(()=>{const S={searchField:C,pageSize:p,currentPage:b,currentSort:u,currentDirection:i};M.get(j.LIST,{params:{...S}}).then(a=>{a.data.code===N.HTTP_OK&&(t(a.data.groupCategories),F(a.data.total))}).catch(a=>{l({type:"error",message:a.data?a.data.message:"Server error"}),o(!0)})},[i,u,b,p,C]);m.exports.useEffect(()=>{H()},[i,u,b,p,C]);const $=m.exports.useCallback(S=>{M.delete(j.DELETE+"/"+S).then(a=>{a.data.code===N.HTTP_OK&&(l({type:"success",message:a.data.message}),o(!0),H()),a.data.code===N.HTTP_NOT_FOUND&&(o(!0),l({type:"error",message:a.data.message}))}).catch(({response:a})=>{a.data.code===N.UNPROCESSABLE_ENTITY&&Object.keys(a.data.errors).forEach(I=>{setError(I,{type:"custom",message:Object.values(a.data.errors[I])})}),l({type:"error",message:a.data?a.data.message:"Server error"}),o(!0)})},[]);return e.createElement(ye,{open:v,setOpen:n,order:i,orderBy:u,page:b,rowsPerPage:p,handleRequestSort:d,handleChangePage:k,handleChangeRowsPerPage:K,redirectGroupCategoryCreate:Y,headCells:w,groupCategoryList:y,showNoti:c,status:r,setShowNoti:o,setSearchFiled:B,totalRecord:G,deleteGroupCategory:$})};export{Le as default};
