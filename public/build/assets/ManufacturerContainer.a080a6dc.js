import{a7 as Y,u as W,r as m,R as e,G as R,C as x,F as N,h as T,a8 as C,a9 as P,B as _,c as K,T as H,aa as J,ab as Q,ac as X,S as Z,d as j,aC as z,q as O}from"./index.5ce80200.js";import{T as ee,a as te,E as ae,b as re,c as se,d as I,e as ne}from"./EnhancedTableHead.4e137c38.js";import{M as ce,R as le}from"./pathUrl.54e42181.js";import{T as V}from"./TextField.f7bb6de6.js";import{S as D}from"./Select.fa04d544.js";import{B as oe}from"./Breadcrumbs.f5b119d2.js";import{S as me}from"./Search.7dacac20.js";import{A as ie}from"./AddCircleSharp.04bafc2d.js";import{C as ue,R as de}from"./ReportProblem.91ad1bc7.js";import{B as Ee}from"./BorderColor.6ee4679d.js";import"./KeyboardArrowRight.e41f0be0.js";import"./LastPage.e4998160.js";import"./OutlinedInput.63c5b1ce.js";const pe=p=>{const{headCells:t,setSearchFiled:S}=p,[c]=Y(),{handleSubmit:i,control:d,reset:u,setValue:h,getValues:g}=W({defaultValues:{manufacturer_code:"",name:"",telephone:"",address:"",status:-1}}),v=m.exports.useMemo(()=>{const s=[];return Object.keys(t).forEach((r,o)=>{t[r].id!=="province_id"&&t[r].id!=="district_id"&&t[r].id!=="commune_id"&&(t[r].type==="date"?s.push(e.createElement(R,{item:!0,xs:4,key:o},e.createElement(x,{name:t[r].id,control:d,render:({field:l})=>e.createElement(N,{variant:"standard"},e.createElement(V,{...l,label:c(t[r].label),type:"date",size:"small",InputLabelProps:{shrink:!0},onBlur:n=>{h(t[r].id,n.target.value?n.target.value.trim():"")}}))}))):t[r].id==="role"?s.push(e.createElement(R,{item:!0,xs:4,key:o},e.createElement(x,{name:t[r].id,control:d,render:({field:l})=>e.createElement(N,{variant:"standard"},e.createElement(D,{...l,label:c(t[r].label),size:"small"},e.createElement(T,{value:-1},"select option"),e.createElement(T,{value:C.EMPLOYEE},c(`role.${C.EMPLOYEE}`)),e.createElement(T,{value:C.MANAGER},c(`role.${C.MANAGER}`))))}))):t[r].id==="status"?s.push(e.createElement(R,{item:!0,xs:4,key:o},e.createElement(x,{name:t[r].id,control:d,render:({field:l})=>e.createElement(N,{variant:"standard"},e.createElement(D,{...l,label:c(t[r].label),size:"small"},e.createElement(T,{key:"",value:-1},"select option"),e.createElement(T,{key:P.ACTIVE,value:P.ACTIVE},c(`status.${P.ACTIVE}`)),e.createElement(T,{key:P.BLOCK,value:P.BLOCK},c(`status.${P.BLOCK}`))))}))):s.push(e.createElement(R,{item:!0,xs:4,key:o},e.createElement(x,{name:t[r].id,control:d,render:({field:l})=>e.createElement(N,{variant:"standard"},e.createElement(V,{...l,label:c(t[r].label),size:"small",onBlur:n=>{h(t[r].id,n.target.value?n.target.value.trim():"")}}))}))))}),s},[]),E=s=>{S(s)};return e.createElement("div",null,e.createElement("form",{onSubmit:i(E)},e.createElement(R,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},v,e.createElement("div",{className:"d-flex w-100"},e.createElement(_,{variant:"contained",type:"submit",className:"m-1",style:{background:"#28a745"}},"Search"),e.createElement(_,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>{u(),S({})}},"Clear")))))},ge=p=>{const{open:t,setOpen:S,order:c,orderBy:i,page:d,rowsPerPage:u,handleRequestSort:h,handleChangePage:g,handleChangeRowsPerPage:v,redirectManufacturerCreate:E,headCells:s,manufacturerList:r,showNoti:o,status:l,setShowNoti:n,setSearchFiled:k,totalRecord:A,deleteManufacturer:F}=p,L=K();return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(H,{variant:"h4",gutterBottom:!0},"Manufacturer"),e.createElement(oe,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(J,{to:"/admin"},"Home"),e.createElement(H,null,"Manufacturer"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(_,{variant:"contained",onClick:()=>S(!t)},"Filter ",e.createElement(me,{sx:{marginLeft:1}})),e.createElement(_,{variant:"contained",onClick:()=>E(),sx:{marginLeft:2}},"Create ",e.createElement(ie,{sx:{marginLeft:1}}))),e.createElement(ue,{in:t,timeout:"auto",unmountOnExit:!0},e.createElement("div",{className:"card__admin"},e.createElement(pe,{headCells:s,setSearchFiled:k}))),e.createElement("div",{className:"card__admin"},e.createElement(Q,{style:{margin:"-25px"}},e.createElement(ee,{sx:{maxHeight:600},className:"table__dark"},e.createElement(te,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,"aria-label":"sticky table"},e.createElement(ae,{order:c,orderBy:i,onRequestSort:h,headCells:s}),e.createElement(re,null,r.length>0?r.map((f,M)=>e.createElement(se,{hover:!0,key:M},e.createElement(I,{component:"td",scope:"row",padding:"normal"},e.createElement(Ee,{color:"primary",className:"action",onClick:()=>{L(ce.UPDATE,{state:{id:f.id}})}}),e.createElement("span",{className:"tool"}),e.createElement(le,{color:"error",className:"action",onClick:()=>F(f.id)})),Object.keys(s).map((b,B)=>e.createElement(I,{component:"td",key:B,scope:"row",padding:"normal"},s[b].render?s[b].convert?X(s[b].render(f)):s[b].render(f):f[b])))):e.createElement(I,{align:"center",colSpan:Object.keys(s).length,style:{opacity:.5,height:"100px"}},e.createElement(de,null)," No data")))),e.createElement(ne,{rowsPerPageOptions:[5,10,25],component:"div",className:"paginate__admin",count:A,rowsPerPage:u,page:d,onPageChange:g,onRowsPerPageChange:v}))),o&&e.createElement(Z,{type:l.type,message:l.message,setShowNoti:n}))},fe={manufacturer_code:{id:"manufacturer_code",numeric:!1,label:"manufacturer.list.table.manufacturer_code",type:"text"},status:{id:"status",numeric:!0,label:"manufacturer.list.table.status",convert:!0,render:p=>`status.${p.status}`,type:"status"},name:{id:"name",numeric:!0,label:"manufacturer.list.table.name"},telephone:{id:"telephone",numeric:!0,label:"manufacturer.list.table.telephone"},address:{id:"address",numeric:!1,label:"manufacturer.list.table.address"}},_e=()=>{const[p,t]=m.exports.useState([]),[S,c]=e.useState(!0),[i,d]=e.useState("asc"),[u,h]=e.useState("manufacturer_code"),[g,v]=e.useState(0),[E,s]=e.useState(5),[r,o]=m.exports.useState({}),[l,n]=m.exports.useState(!1),[k,A]=m.exports.useState({}),[F,L]=m.exports.useState(0),f=K(),M={...fe},b=(y,a)=>{d(u===a&&i==="asc"?"desc":"asc"),h(a)},B=(y,a)=>{v(a)},$=y=>{s(parseInt(y.target.value,10)),v(0)},q=m.exports.useCallback(()=>{f("/admin/manufacturer/create")},[]),U=m.exports.useCallback(()=>{const y={searchField:k,pageSize:E,currentPage:g,currentSort:u,currentDirection:i};j.get(z.LIST,{params:{...y}}).then(a=>{a.data.code===O.HTTP_OK&&(t(a.data.manufacturers),L(a.data.total))}).catch(a=>{o({type:"error",message:a.data?a.data.message:"Server error"}),n(!0)})},[i,u,g,E,k]);m.exports.useEffect(()=>{U()},[i,u,g,E,k]);const G=m.exports.useCallback(y=>{j.delete(z.DELETE+"/"+y).then(a=>{a.data.code===O.HTTP_OK&&(o({type:"success",message:a.data.message}),n(!0),U()),a.data.code===O.HTTP_NOT_FOUND&&(n(!0),o({type:"error",message:a.data.message}))}).catch(({response:a})=>{a.data.code===O.UNPROCESSABLE_ENTITY&&Object.keys(a.data.errors).forEach(w=>{setError(w,{type:"custom",message:Object.values(a.data.errors[w])})}),o({type:"error",message:a.data?a.data.message:"Server error"}),n(!0)})},[]);return e.createElement(ge,{open:S,setOpen:c,order:i,orderBy:u,page:g,rowsPerPage:E,handleRequestSort:b,handleChangePage:B,handleChangeRowsPerPage:$,redirectManufacturerCreate:q,headCells:M,manufacturerList:p,showNoti:l,status:r,setShowNoti:n,setSearchFiled:A,totalRecord:F,deleteManufacturer:G})};export{_e as default};
