import{r as c,aX as U,aY as A,a7 as G,u as J,R as e,G as u,C as S,F as f,h as _,a8 as F,aZ as m,B as M,c as H,T as z,aa as K,ab as W,S as X,o as D,d as Z,a_ as Q,q as ee}from"./index.5ce80200.js";import{T as O}from"./TextField.f7bb6de6.js";import{S as $}from"./Select.fa04d544.js";import{T as te,a as re,E as ae,b as se,c as ne,d as I,e as le}from"./EnhancedTableHead.4e137c38.js";import{B as ce}from"./Breadcrumbs.f5b119d2.js";import{S as oe}from"./Search.7dacac20.js";import{C as ie,R as me}from"./ReportProblem.91ad1bc7.js";import{f as de}from"./index.d7c082dd.js";import{p as ue}from"./index.ac026f14.js";import"./OutlinedInput.63c5b1ce.js";import"./KeyboardArrowRight.e41f0be0.js";import"./LastPage.e4998160.js";var pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M396 512a112 112 0 10224 0 112 112 0 10-224 0zm546.2-25.8C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}}]},name:"eye",theme:"filled"};const Ee=pe;var V=function(t,y){return c.exports.createElement(U,A(A({},t),{},{ref:y,icon:Ee}))};V.displayName="EyeFilled";const ge=c.exports.forwardRef(V),be=r=>{const{headCells:t,setSearchFiled:y}=r,[o]=G(),{handleSubmit:g,control:i,reset:b,setValue:p,getValues:x}=J({defaultValues:{order_code:"",customer_name:"",price_min:"",price_max:"",order_start:"",order_end:"",address:"",status:-1}}),k=c.exports.useMemo(()=>{const n=[];return Object.keys(t).forEach((a,E)=>{t[a].id!=="province_id"&&t[a].id!=="district_id"&&t[a].id!=="commune_id"&&t[a].id!=="price_discount"&&(t[a].type==="date"?n.push(e.createElement(u,{item:!0,xs:4,key:E},e.createElement(S,{name:t[a].id,control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement(O,{...l,label:o(t[a].label),type:"date",size:"small",InputLabelProps:{shrink:!0},onBlur:s=>{p(t[a].id,s.target.value?s.target.value.trim():"")}}))}))):t[a].id==="role"?n.push(e.createElement(u,{item:!0,xs:4,key:E},e.createElement(S,{name:t[a].id,control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement($,{...l,label:o(t[a].label),size:"small"},e.createElement(_,{value:-1},"select option"),e.createElement(_,{value:F.EMPLOYEE},o(`role.${F.EMPLOYEE}`)),e.createElement(_,{value:F.MANAGER},o(`role.${F.MANAGER}`))))}))):t[a].id==="status"?n.push(e.createElement(u,{item:!0,xs:4,key:E},e.createElement(S,{name:t[a].id,control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement($,{...l,label:o(t[a].label),size:"small"},e.createElement(_,{key:"",value:-1},"select option"),e.createElement(_,{key:m.PENDING,value:m.PENDING},o(`order.status.${m.PENDING}`)),e.createElement(_,{key:m.DELEVERY,value:m.DELEVERY},o(`order.status.${m.DELEVERY}`)),e.createElement(_,{key:m.SUCCESS,value:m.SUCCESS},o(`order.status.${m.SUCCESS}`)),e.createElement(_,{key:m.CANCEL,value:m.CANCEL},o(`order.status.${m.CANCEL}`))))}))):t[a].id==="price"?n.push(e.createElement(u,{item:!0,xs:4,key:E,style:{display:"flex",alignItems:"center",padding:25}},e.createElement(u,{item:!0,xs:6},e.createElement(S,{name:"price_min",control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement(O,{...l,label:"Min price",size:"small",onBlur:s=>{p("price_min",s.target.value?s.target.value.trim():"")},type:"number"}))})),e.createElement("span",{style:{margin:"0 10px"}},"~"),e.createElement(u,{item:!0,xs:6},e.createElement(S,{name:"price_max",control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement(O,{...l,label:"Max price",size:"small",onBlur:s=>{p("price_max",s.target.value?s.target.value.trim():"")},type:"number"}))})))):t[a].id==="order_date"?n.push(e.createElement(u,{item:!0,xs:4,key:E,style:{display:"flex",alignItems:"center",padding:25}},e.createElement(u,{item:!0,xs:6},e.createElement(S,{name:"order_start",control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement(O,{...l,label:"Order start",type:"date",size:"small",InputLabelProps:{shrink:!0},onBlur:s=>{p(s.target.id,s.target.value?s.target.value.trim():"")}}))})),e.createElement("span",{style:{margin:"0 10px"}},"~"),e.createElement(u,{item:!0,xs:6},e.createElement(S,{name:"order_end",control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement(O,{...l,label:"Order end",type:"date",size:"small",InputLabelProps:{shrink:!0},onBlur:s=>{p(s.target.id,s.target.value?s.target.value.trim():"")}}))})))):n.push(e.createElement(u,{item:!0,xs:4,key:E},e.createElement(S,{name:t[a].id,control:i,render:({field:l})=>e.createElement(f,{variant:"standard"},e.createElement(O,{...l,label:o(t[a].label),size:"small",onBlur:s=>{p(t[a].id,s.target.value?s.target.value.trim():"")}}))}))))}),n},[]),h=n=>{y(n)};return e.createElement("div",null,e.createElement("form",{onSubmit:g(h)},e.createElement(u,{container:!0,sx:{margin:0,padding:1,width:"100%"},spacing:10},k,e.createElement("div",{className:"d-flex w-100"},e.createElement(M,{variant:"contained",type:"submit",className:"m-1",style:{background:"#28a745"}},"Search"),e.createElement(M,{variant:"contained",type:"reset",className:"m-1 btn-cancel",onClick:()=>{b(),y({})}},"Clear")))))},ye=r=>{const{open:t,setOpen:y,order:o,orderBy:g,page:i,rowsPerPage:b,handleRequestSort:p,handleChangePage:x,handleChangeRowsPerPage:k,redirectManufacturerCreate:h,headCells:n,orderList:a,showNoti:E,status:l,setShowNoti:s,setSearchFiled:R,totalRecord:T}=r,[L]=G(),C=H();return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement(z,{variant:"h4",gutterBottom:!0},"Orders"),e.createElement(ce,{separator:"\u203A","aria-label":"breadcrumb"},e.createElement(K,{to:"/admin"},"Home"),e.createElement(z,null,"Order"))),e.createElement("div",{style:{marginBottom:10}},e.createElement(M,{variant:"contained",onClick:()=>y(!t)},"Filter ",e.createElement(oe,{sx:{marginLeft:1}}))),e.createElement(ie,{in:t,timeout:"auto",unmountOnExit:!0},e.createElement("div",{className:"card__admin"},e.createElement(be,{headCells:n,setSearchFiled:R}))),e.createElement("div",{className:"card__admin"},e.createElement(W,{style:{margin:"-25px"}},e.createElement(te,{sx:{maxHeight:600},className:"table__dark"},e.createElement(re,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,"aria-label":"sticky table"},e.createElement(ae,{order:o,orderBy:g,onRequestSort:p,headCells:n}),e.createElement(se,null,a.length>0?a.map((N,w)=>e.createElement(ne,{hover:!0,key:w},e.createElement(I,{component:"td",scope:"row",padding:"normal",key:"tool"},e.createElement(ge,{color:"primary",className:"action",onClick:()=>{C("/admin/orders/detail",{state:{id:N.id}})}})),Object.keys(n).map((P,B)=>e.createElement(I,{component:"td",key:B,scope:"row",padding:"normal"},n[P].render?n[P].convert?L(n[P].render(N)):n[P].render(N):N[P])))):e.createElement(I,{align:"center",colSpan:Object.keys(n).length,style:{opacity:.5,height:"100px"}},e.createElement(me,null)," No data")))),e.createElement(le,{rowsPerPageOptions:[5,10,25],component:"div",className:"paginate__admin",count:T,rowsPerPage:b,page:i,onPageChange:x,onRowsPerPageChange:k}))),E&&e.createElement(X,{type:l.type,message:l.message,setShowNoti:s}))},Se={order_code:{id:"order_code",numeric:!0,label:"order.list.table.order_code",type:"text",render:r=>r.id},customer_name:{id:"customer_name",numeric:!1,label:"order.list.table.customer_name",type:"text",render:r=>{if(r&&(r==null?void 0:r.address)){let t=JSON.parse(r==null?void 0:r.address);return t==null?void 0:t.full_name}return""}},status:{id:"status",numeric:!0,label:"order.list.table.status",convert:!0,render:r=>`order.status.${r.status}`,type:"status"},price:{id:"price",numeric:!0,label:"order.list.table.price",render:r=>D(r.price||0)},price_discount:{id:"price_discount",numeric:!0,label:"order.list.table.price_discount",render:r=>D(r.price_discount||0)},address:{id:"address",numeric:!1,label:"order.list.table.address",render:r=>{if(r&&(r==null?void 0:r.address)){let t=JSON.parse(r==null?void 0:r.address);return t==null?void 0:t.address}return""}},order_date:{id:"order_date",numeric:!1,label:"order.list.table.order_date",render:r=>de(ue(r.created_at),"yyyy-MM-dd")}},Ce=()=>{const[r,t]=c.exports.useState([]),[y,o]=c.exports.useState(!0),[g,i]=c.exports.useState("asc"),[b,p]=c.exports.useState("order_code"),[x,k]=c.exports.useState(0),[h,n]=c.exports.useState(5),[a,E]=c.exports.useState({}),[l,s]=c.exports.useState(!1),[R,T]=c.exports.useState({}),[L,C]=c.exports.useState(0),N=H(),w={...Se},P=(v,d)=>{i(b===d&&g==="asc"?"desc":"asc"),p(d)},B=(v,d)=>{k(d)},Y=v=>{n(parseInt(v.target.value,10)),k(0)},j=c.exports.useCallback(()=>{N("/admin/manufacturer/create")},[]),q=c.exports.useCallback(()=>{const v={searchField:R,pageSize:h,currentPage:x,currentSort:b,currentDirection:g};Z.get(Q.LIST,{params:{...v}}).then(d=>{d.data.code===ee.HTTP_OK&&(t(d.data.orders),C(d.data.total))}).catch(d=>{E({type:"error",message:d.data?d.data.message:"Server error"}),s(!0)})},[g,b,x,h,R]);return c.exports.useEffect(()=>{q()},[g,b,x,h,R]),e.createElement(ye,{open:y,setOpen:o,order:g,orderBy:b,page:x,rowsPerPage:h,handleRequestSort:P,handleChangePage:B,handleChangeRowsPerPage:Y,redirectManufacturerCreate:j,headCells:w,orderList:r,showNoti:l,status:a,setShowNoti:s,setSearchFiled:T,totalRecord:L})};export{Ce as default};
