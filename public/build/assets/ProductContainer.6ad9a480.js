import{Q as j,H as k,s as oe,t as se,v as ie,V as le,w as q,_ as O,ag as me,r as s,x as de,y as pe,I as ge,J as ue,bl as J,c as Q,R as e,T as he,B as T,j as v,F as N,C as P,n as $,aU as Ee,h as F,a$ as xe,o as A,ay as ye,u as _e,d as D,bm as be,q as G,bn as fe}from"./index.5ce80200.js";import"./lodash.04c458ec.js";import{L as H}from"./ListSubheader.7cd47645.js";import{S as Ce,b as X,F as L,R as Y,a as Z}from"./RadioGroup.7a04bd2c.js";import{T as K}from"./TextField.f7bb6de6.js";import{R as V,S as ke}from"./Star.7de26383.js";import{S as Se}from"./Select.fa04d544.js";import{S as Ne}from"./Stack.5c2058c0.js";import{P as Pe}from"./Pagination.02c54dfc.js";import"./OutlinedInput.63c5b1ce.js";import"./LastPage.e4998160.js";const ze=j(k.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Re=j(k.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ie=j(k.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function we(t){return se("MuiCheckbox",t)}const Oe=oe("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),W=Oe,Be=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Fe=t=>{const{classes:r,indeterminate:i,color:l}=t,p={root:["root",i&&"indeterminate",`color${q(l)}`]},m=ue(p,we,r);return O({},r,m)},je=ie(Ce,{shouldForwardProp:t=>le(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:i}=t;return[r.root,i.indeterminate&&r.indeterminate,i.color!=="default"&&r[`color${q(i.color)}`]]}})(({theme:t,ownerState:r})=>O({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${r.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:me(r.color==="default"?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},r.color!=="default"&&{[`&.${W.checked}, &.${W.indeterminate}`]:{color:(t.vars||t).palette[r.color].main},[`&.${W.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),ve=k.jsx(Re,{}),He=k.jsx(ze,{}),Le=k.jsx(Ie,{}),Me=s.exports.forwardRef(function(r,i){var l,p;const m=de({props:r,name:"MuiCheckbox"}),{checkedIcon:d=ve,color:h="primary",icon:E=He,indeterminate:c=!1,indeterminateIcon:a=Le,inputProps:_,size:g="medium",className:o}=m,u=pe(m,Be),x=c?a:E,C=c?a:d,y=O({},m,{color:h,indeterminate:c,size:g}),b=Fe(y);return k.jsx(je,O({type:"checkbox",inputProps:O({"data-indeterminate":c},_),icon:s.exports.cloneElement(x,{fontSize:(l=x.props.fontSize)!=null?l:g}),checkedIcon:s.exports.cloneElement(C,{fontSize:(p=C.props.fontSize)!=null?p:g}),ownerState:y,ref:i,className:ge(b.root,o)},u,{classes:b}))}),ee=Me,$e=j([k.jsx("path",{d:"M5 5h2v3h10V5h2v5h2V5c0-1.1-.9-2-2-2h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v-2H5V5zm7-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"},"0"),k.jsx("path",{d:"M20.3 18.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S12 14 12 16.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l2.7 2.7 1.4-1.4-2.7-2.7zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"},"1")],"ContentPasteSearch"),Ae=({clear:t,setComplateSetting:r})=>{const{setSearchFiled:i}=J();return Q(),s.exports.useCallback(()=>{i({})},[]),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"10px auto"}},e.createElement($e,{style:{fontSize:80,color:"#bac4cd"}}),e.createElement(he,{variant:"h6",component:"h2"},"No result is found"),e.createElement(T,{variant:"text",style:{textTransform:"capitalize"},onClick:()=>{t(),r(l=>!l)}},"Clear search"))},We=({option:t,label:r,setSearchFiled:i,searchField:l,name:p,control:m,setValue:d,getValues:h,getProductList:E,isCompleteSetting:c,setComplateSetting:a})=>{const[_,g]=s.exports.useState(h("category_id"));return s.exports.useEffect(()=>(d("category_id",_),a(o=>!o),()=>{d("category_id","")}),[_]),e.createElement(v,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},subheader:e.createElement(H,{className:"search-title",component:"div",style:{fontWeight:"bold",padding:"10px 0",lineHeight:"22px",fontSize:"18px"}},r)},e.createElement(N,{component:"fieldset"},e.createElement(X,null,e.createElement(P,{name:p,control:m,render:({field:o})=>Object.values(t).map(u=>e.createElement(L,{...o,key:u.id,label:u.name,control:e.createElement(ee,{className:"ligth__mode",onChange:()=>{if(!o.value.includes(u.id)){o.onChange([...o.value,u.id]),g(...o.value,u.id);return}const x=o.value.filter(C=>C!==u.id);o.onChange(x),g(x)}})}))}))))},Te=({formFilter:t,option:r,setSearchFiled:i,searchField:l,name:p,reset:m,setValue:d,getValues:h,getProductList:E,control:c,handleSubmit:a,isCompleteSetting:_,setComplateSetting:g})=>{const[o,u]=s.exports.useState(h("attribute"));return s.exports.useEffect(()=>(d("attribute",o),g(x=>!x),()=>{d("attribute",[])}),[o]),t[r]&&Object.keys(t[r]).map((x,C)=>{if(Object.keys(t[r][x].option).length>0||t[r][x].option.length>0)return e.createElement(v,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},key:C,subheader:e.createElement(H,{className:"search-title",component:"div",style:{fontWeight:"bold",padding:"10px 0",lineHeight:"22px",fontSize:"18px"}},t[r][x].name)},e.createElement(N,{component:"fieldset"},e.createElement(X,null,e.createElement(P,{name:p,control:c,render:({field:y})=>Object.values(t[r][x].option).map((b,w)=>e.createElement(L,{...y,key:b.id,label:b.name,control:e.createElement(ee,{className:"ligth__mode",onChange:()=>{if(!y.value.includes(b.id)){y.onChange([...y.value,b.id]),u([...y.value,b.id]);return}const z=y.value.filter(n=>n!==b.id);y.onChange(z),u(z)}})}))}))))})},Ue=({setSearchFiled:t,name:r,option:i,reset:l,setValue:p,getValues:m,control:d,handleSubmit:h,getProductList:E,isCompleteSetting:c,setComplateSetting:a})=>{const[_,g]=s.exports.useState(m("group_category_id"));return s.exports.useEffect(()=>(p("group_category_id",_),a(o=>!o),()=>{p("group_category_id","")}),[_]),e.createElement(v,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},subheader:e.createElement(H,{className:"search-title",component:"div",style:{fontWeight:"bold",padding:"10px 0",lineHeight:"22px",fontSize:"18px"}},"Category")},e.createElement(P,{name:"group_category_id",control:d,render:({field:o})=>e.createElement(N,{variant:"standard"},e.createElement(Y,null,i.map(u=>e.createElement(L,{...o,key:u.id,control:e.createElement(Z,{value:u.id,readOnly:!0,style:{display:"none"},onClick:()=>{o.value==u.id?(o.onChange(""),g("")):(o.onChange(u.id),g(u.id))}}),label:u.name,style:{marginLeft:0},className:`${m("group_category_id")==u.id?"active":""}`}))))}))},De=({setSearchFiled:t,searchField:r,reset:i,setValue:l,getValues:p,control:m,getProductList:d,handleSubmit:h,setComplateSetting:E})=>e.createElement(e.Fragment,null,e.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"25px 0 10px 0"}},e.createElement(P,{name:"price_min",control:m,render:({field:c})=>e.createElement(N,{variant:"standard"},e.createElement(K,{...c,label:"Min price",size:"small",onBlur:a=>{l(a.target.value?a.target.value.trim():"")},type:"number",onChange:a=>l(a.target.name,a.target.value),className:"ligth__mode"}))}),e.createElement("span",{style:{margin:"0 10px"}},"~"),e.createElement(P,{name:"price_max",control:m,render:({field:c})=>e.createElement(N,{variant:"standard"},e.createElement(K,{...c,label:"Max price",size:"small",onBlur:a=>{l(a.target.name,a.target.value?a.target.value.trim():"")},type:"number",onChange:a=>l(a.target.name,a.target.value),className:"ligth__mode"}))})),e.createElement("div",{className:"d-flex w-100"},e.createElement(T,{variant:"contained",type:"submit",style:{background:"#28a745",marginRight:5},size:"small",onClick:h(d)},"Apply"),e.createElement(T,{variant:"contained",type:"reset",className:"bg-gray-100",size:"small",onClick:()=>{l("price_min",""),l("price_max",""),E(c=>!c)}},"Clear"))),Ge=({setSearchFiled:t,name:r,setValue:i,getValues:l,control:p,getProductList:m,setComplateSetting:d})=>{const[h,E]=s.exports.useState(l("rate"));return s.exports.useEffect(()=>(i("rate",h),d(c=>!c),()=>{i("rate","")}),[h]),e.createElement(v,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},subheader:e.createElement(H,{className:"search-title",component:"div",style:{fontWeight:"bold",padding:"10px 0",lineHeight:"22px",fontSize:"18px"}},"Rating")},e.createElement(P,{name:"rate",control:p,render:({field:c})=>e.createElement(N,{variant:"standard"},e.createElement(Y,null,[5,4,3,2,1].map(a=>e.createElement(L,{...c,key:a,control:e.createElement(Z,{value:a,style:{display:"none"},onClick:()=>{c.value==a?(c.onChange(""),E("")):(c.onChange(a),E(a))}}),label:e.createElement(V,{value:a,readOnly:!0,className:`${l("rate")==a?"rate__active":""}`}),style:{marginLeft:0}}))))}))},Ke=({formFilter:t,setSearchFiled:r,searchField:i,reset:l,setValue:p,getValues:m,control:d,getProductList:h,handleSubmit:E,isCompleteSetting:c,setComplateSetting:a})=>{const _=s.exports.useMemo(()=>t&&Object.keys(t).map((g,o)=>{if(g=="groupCategory")return e.createElement(s.exports.Fragment,{key:o},e.createElement(Ue,{option:t[g],setSearchFiled:r,name:"group_category_id",searchField:i,reset:l,setValue:p,getValues:m,getProductList:h,control:d,handleSubmit:E,isCompleteSetting:c,setComplateSetting:a}),e.createElement($,{style:{borderColor:"rgb(246, 249, 252)",borderBottomWidth:"medium",opacity:1}}));if(g=="category")return e.createElement(s.exports.Fragment,{key:o},e.createElement(We,{option:t[g],label:"Brand",setSearchFiled:r,name:"category_id",searchField:i,reset:l,setValue:p,getValues:m,getProductList:h,control:d,handleSubmit:E,isCompleteSetting:c,setComplateSetting:a}),e.createElement($,{style:{borderColor:"rgb(246, 249, 252)",borderBottomWidth:"medium",opacity:1}}));if(g=="attribute")return e.createElement(Te,{option:g,setSearchFiled:r,name:"attribute",searchField:i,formFilter:t,key:o,reset:l,setValue:p,getValues:m,getProductList:h,control:d,handleSubmit:E,isCompleteSetting:c,setComplateSetting:a});if(g=="price")return e.createElement(s.exports.Fragment,{key:o},e.createElement(De,{setSearchFiled:r,name:"price",searchField:i,reset:l,setValue:p,getValues:m,getProductList:h,control:d,handleSubmit:E,isCompleteSetting:c,setComplateSetting:a}));if(g=="rate")return e.createElement(s.exports.Fragment,{key:o},e.createElement(Ge,{setSearchFiled:r,name:"rate",searchField:i,reset:l,setValue:p,getValues:m,getProductList:h,control:d,handleSubmit:E,isCompleteSetting:c,setComplateSetting:a}),e.createElement($,{style:{borderColor:"rgb(246, 249, 252)",borderBottomWidth:"medium",opacity:1}}))}),[t,i]);return e.createElement("div",{className:"addvance__search"},_)};const qe=t=>{const{orderBy:r,page:i,rowsPerPage:l,setSearchFiled:p,totalRecord:m,productList:d,formFilter:h,searchField:E,setPage:c,handleSubmit:a,control:_,reset:g,setValue:o,getValues:u,getProductList:x,isCompleteSetting:C,setComplateSetting:y,clear:b,keySearch:w}=t,z=Q();return e.createElement("section",{className:"search py-5",style:{background:"rgb(246, 249, 252)"}},e.createElement("form",{action:""},e.createElement("div",{className:"container"},e.createElement(Ee,null,e.createElement("div",{className:"d-flex justify-content-between bg-white search__header"},e.createElement("div",{className:"search__result"},e.createElement("h4",{className:"search__result__text"},"Searching for \u201C ",w||"All"," ","\u201D"),e.createElement("p",{className:"search__result__res"},m," results found")),e.createElement("div",{className:"sort"},e.createElement(P,{name:"order",control:_,render:({field:n})=>e.createElement(N,{sx:{m:1},className:"flex-row align-items-center justify-content-end"},e.createElement("label",{htmlFor:"",className:"mr-2"},"Sort by:"),e.createElement(Se,{...n,onChange:a(x),displayEmpty:!0,inputProps:{"aria-label":"Without label"},className:"custom__select"},e.createElement(F,{value:1},"Newest"),e.createElement(F,{value:2},"Best saller"),e.createElement(F,{value:3},"Price: Low to High"),e.createElement(F,{value:4},"Price: High to Low")))}))))),e.createElement("div",{className:"container mt-5 d-flex"},e.createElement(Ke,{formFilter:h,setSearchFiled:p,searchField:E,reset:g,setValue:o,getValues:u,getProductList:x,control:_,handleSubmit:a,isCompleteSetting:C,setComplateSetting:y}),m!==0?e.createElement("div",{className:"product__list"},e.createElement("div",{style:{width:"100%"}},d&&Object.values(d).map(n=>e.createElement("div",{className:"product__list__item",key:n.id},e.createElement("div",{className:"product m-3"},e.createElement("div",{className:"img",onClick:()=>z("/elite/product",{state:{id:n.id}})},n!=null&&n.sale_persen?e.createElement("span",{className:"discount"},n==null?void 0:n.sale_persen,"% Off"):"",e.createElement("img",{src:xe+(n==null?void 0:n.image),alt:""})),e.createElement("div",{className:"product-details"},e.createElement("h3",null,n==null?void 0:n.name),e.createElement(V,{name:"text-feedback",value:(n==null?void 0:n.total_rate)||0,readOnly:!0,precision:.5,emptyIcon:e.createElement(ke,{style:{opacity:.55},fontSize:"inherit"})}),e.createElement("div",{className:"price"},e.createElement("div",{style:{display:"flex",alignItems:"baseline"}},n!=null&&n.sale_price?e.createElement(e.Fragment,null,e.createElement("span",{className:"old-price"},A(n==null?void 0:n.min_price)),e.createElement("span",{className:"new-price",style:{marginLeft:5}},A(n==null?void 0:n.sale_price))):e.createElement("span",{className:"new-price"},A(n==null?void 0:n.min_price))),e.createElement("button",{onClick:()=>({})},e.createElement("i",{className:"fa fa-plus"})))))))),e.createElement("div",{className:"d-flex mt-3 justify-content-end w-100"},e.createElement("div",{className:"pagination"},e.createElement(Ne,{spacing:2},e.createElement(Pe,{count:Math.ceil(m/l),page:i,onChange:(n,R)=>c(R)}))))):e.createElement(Ae,{clear:b,setComplateSetting:y}))))},ct=({keySearch:t,setKeySearch:r,isCompleteSetting:i,setComplateSetting:l})=>{const[p,m]=s.exports.useState([]),[d,h]=s.exports.useState("product_code"),[E,c]=s.exports.useState(1),[a,_]=s.exports.useState(15),{searchField:g,setSearchFiled:o}=J(),[u,x]=s.exports.useState(0),[C,y]=s.exports.useState({}),[b,w]=s.exports.useState(!1),[z,n]=s.exports.useState([]),{state:R}=ye(),{handleSubmit:te,control:ae,reset:re,setValue:f,getValues:B}=_e({shouldUnregister:!1,defaultValues:{group_category_id:"",category_id:"",attribute:[],rate:"",price_min:"",price_max:"",order:"1"}}),U=M=>{const S={searchField:M,pageSize:a,currentPage:E,currentSort:d,currentDirection:d};D.get(fe,{params:{...S}}).then(I=>{I.data.code===G.HTTP_OK&&(m(I.data.products),x(I.data.total))}).catch(I=>{y({type:"error",message:I.data?I.data.message:"Server error"}),w(!0)})},ne=s.exports.useCallback(M=>{D.get(be,{params:{group_category_id:M}}).then(S=>{S.data.code===G.HTTP_OK&&n(S.data.formFilter)}).catch(S=>{y({type:"error",message:S.data?S.data.message:"Server error"}),w(!0)})},[]),ce=()=>{f("price_min",""),f("price_max",""),f("group_category_id",""),f("category_id",[]),f("attribute",[]),f("rate",""),f("price_min",""),f("order","1"),r("")};return s.exports.useEffect(()=>{R&&R.group_category_id&&f("group_category_id",R.group_category_id)},[R]),s.exports.useEffect(()=>{f("name",t)},[t]),s.exports.useEffect(()=>{U(B())},[i]),s.exports.useEffect(()=>{ne(B("group_category_id"))},[B("group_category_id")]),e.createElement(qe,{orderBy:d,page:E,rowsPerPage:a,setSearchFiled:o,totalRecord:u,productList:p,formFilter:z,setPage:c,handleSubmit:te,control:ae,reset:re,setValue:f,getValues:B,getProductList:U,isCompleteSetting:i,setComplateSetting:l,clear:ce,keySearch:t})};export{ct as default};
